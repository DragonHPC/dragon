<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The API Stack &mdash; Dragon  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Solution Cookbook" href="../cbook/cbook.html" />
    <link rel="prev" title="Ownership, Placement and Locality" href="owner.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Dragon
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uguide/uguide.html">Users Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="pguide.html">Programming Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dragon_multiprocessing.html">Multiprocessing with Dragon</a></li>
<li class="toctree-l2"><a class="reference internal" href="dragon_mpi.html">MPI with Dragon</a></li>
<li class="toctree-l2"><a class="reference internal" href="envvars.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="owner.html">Ownership, Placement and Locality</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">The API Stack</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#architecture-of-a-dragon-program">Architecture of a Dragon Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="#architecture-of-advanced-use-cases">Architecture of Advanced Use Cases</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cbook/cbook.html">Solution Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/ref.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components/components.html">Low-level Components</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Dragon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="pguide.html">Programming Guide</a></li>
      <li class="breadcrumb-item active">The API Stack</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pguide/stack.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-api-stack">
<h1>The API Stack<a class="headerlink" href="#the-api-stack" title="Permalink to this heading"></a></h1>
<p>Before you start programming with Dragon, you need to decide which API you want
to program to. The runtime provides a stack of interfaces abstracting
<a class="reference internal" href="../uguide/glossary.html#term-System-Resource"><span class="xref std std-term">resources</span></a> of a distributed system, ranging from low-level shared
memory to a distributed dictionary. It is <em>composable</em>, meaning the APIs are
built on top of each other (see figure 1). We deliberately expose the whole
stack of APIs so that you can choose if you want to interact with the complete
runtime or want to use only parts of it. For an overview, see table 1 in the
<a class="reference internal" href="../ref/ref.html#api-reference"><span class="std std-ref">reference section</span></a>.</p>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="../_images/dragon_api_stack.png"><img alt="../_images/dragon_api_stack.png" src="../_images/dragon_api_stack.png" style="width: 237.0px; height: 261.5px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 6 </span><span class="caption-text"><strong>Figure 1: The Dragon API stack</strong></span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Lower level interfaces yield less convenient objects. Thus new and experienced
users should consider programming to Dragon in two ways:</p>
<ol class="arabic simple">
<li><p>In Python using <a class="reference internal" href="dragon_multiprocessing.html#multiprocessing-with-dragon"><span class="std std-ref">Multiprocessing with Dragon</span></a>, if they
want to make an existing Python code scale to a distributed system quickly.</p></li>
<li><p>In C, C++, Fortran and Python using the <a class="reference internal" href="../ref/native/index.html#dragon-native"><span class="std std-ref">Dragon Native</span></a> API, if they want to take advantage
of all Dragon features or need to use languages other than Python.</p></li>
</ol>
<p>The objects provided by these two APIs have the following properties:</p>
<ul class="simple">
<li><p><strong>interoperable</strong>: a named Python Multiprocessing Queue object can be used as a managed Dragon Native Queue in C with the same name.</p></li>
<li><p><strong>transparent</strong>: <a class="reference internal" href="../uguide/glossary.html#term-Transparency"><span class="xref std std-term">objects</span></a> can be used everywhere on a system of distributed or even federated nodes.</p></li>
<li><p><strong>shareable</strong>: objects can be serialized and passed to other programs, processes or threads via stdin.</p></li>
<li><p><strong>managed</strong>: <a class="reference internal" href="../uguide/glossary.html#term-Managed-Object"><span class="xref std std-term">objects</span></a> can be looked up by <a class="reference internal" href="../uguide/glossary.html#term-Object-Name"><span class="xref std std-term">name</span></a> or <a class="reference internal" href="../uguide/glossary.html#term-Object-UID"><span class="xref std std-term">uid</span></a> to retrieve their <a class="reference internal" href="../uguide/glossary.html#term-Serialized-Descriptor"><span class="xref std std-term">serialized descriptor</span></a>.</p></li>
<li><p><strong>refcounted</strong>: <a class="reference internal" href="../uguide/glossary.html#term-Refcounted-Object"><span class="xref std std-term">object</span></a> life-cycle is controlled by the Dragon runtime. It is automatically removed by the runtime if no program, process or thread is using it anymore.</p></li>
<li><p><strong>thread-safe</strong>: users do not have to care about race conditions in objects when they are shared among programs, processes or threads.</p></li>
<li><p><strong>performant</strong>: objects scale to distributed systems and efficiently support workflows across federated systems.</p></li>
</ul>
<p>Only the Dragon Native API is <em>polyglot</em>, i.e. available in all supported
programming languages.</p>
<p>In the future, experienced developers can further program to the</p>
<ol class="arabic simple" start="3">
<li><p><a class="reference internal" href="../uguide/glossary.html#term-Unmanaged-Object"><span class="xref std std-term">Unmanaged</span></a> Dragon Native API, if they want to use composite objects with improved performance. See <a class="reference internal" href="../uguide/resource_model.html#performance-costs"><span class="std std-ref">Performance Costs</span></a>.</p></li>
<li><p>Dragon Client API or Dragon Infrastructure API, if they want to extend the functionality of the Dragon runtime by extending Dragon Services.</p></li>
<li><p>Dragon Core API, to use core functionality in their own programs without starting the runtime. To use the Dragon core API on its own, see also <a class="reference internal" href="dragon_multiprocessing.html#multiprocessing-and-dragon-without-patching"><span class="std std-ref">Multiprocessing and Dragon without Patching</span></a></p></li>
</ol>
<section id="architecture-of-a-dragon-program">
<h2>Architecture of a Dragon Program<a class="headerlink" href="#architecture-of-a-dragon-program" title="Permalink to this heading"></a></h2>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="../_images/api_use_python.svg"><img alt="../_images/api_use_python.svg" height="402" src="../_images/api_use_python.svg" width="578" /></a>
<figcaption>
<p><span class="caption-number">Fig. 7 </span><span class="caption-text"><strong>Figure 2: Architecture of a user program using Dragon with Python Multiprocessing or Dragon Native. Internal Dragon APIs are not shown.</strong></span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>In figure 2 we show a component diagram of the architecture of a Dragon program
using either the Python Multiprocessing with Dragon API, or the Dragon Native
API.</p>
<ul class="simple">
<li><p>User programs using <a class="reference internal" href="../uguide/glossary.html#term-Managed-Object"><span class="xref std std-term">managed</span></a> Dragon native objects directly call into the Dragon
stack. The Dragon native implementation uses the core and client components to
implement its objects on top of the four <a class="reference internal" href="../uguide/glossary.html#term-Primary-Object"><span class="xref std std-term">primary objects</span></a>.
Dragon services manage the primary objects and communicate using the
infrastructure message component on top of the core API.</p></li>
<li><p>Python Multiprocessing with Dragon programs only use the Multiprocessing API. Our
MPBridge component translates the Multiprocessing objects into Dragon native objects by
heavily modifying the object APIs. This way we achieve limited interoperability between
both APIs.</p></li>
</ul>
</section>
<section id="architecture-of-advanced-use-cases">
<h2>Architecture of Advanced Use Cases<a class="headerlink" href="#architecture-of-advanced-use-cases" title="Permalink to this heading"></a></h2>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="../_images/api_use_core.svg"><img alt="../_images/api_use_core.svg" height="506" src="../_images/api_use_core.svg" width="354" /></a>
<figcaption>
<p><span class="caption-number">Fig. 8 </span><span class="caption-text"><strong>Figure 3: Architecture of advanced use cases for the Dragon runtime. Internal APIs are not shown.</strong></span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>In figure 3 we show a component diagram of the architecture of advanced use cases for Dragon.
Note that these use cases are not supported yet.</p>
<ul class="simple">
<li><p>User programs using <a class="reference internal" href="../uguide/glossary.html#term-Unmanaged-Object"><span class="xref std std-term">unmanaged</span></a> Dragon native objects directly call into
Dragon, but do not require the infrastructure services to track <a class="reference internal" href="../uguide/glossary.html#term-Object-Name"><span class="xref std std-term">names</span></a> and
<a class="reference internal" href="../uguide/glossary.html#term-Object-UID"><span class="xref std std-term">uids</span></a> of their objects. This reduces the load on infrastructure services, which only
provide <a class="reference internal" href="../uguide/glossary.html#term-Transparency"><span class="xref std std-term">transparency</span></a> across <a class="reference internal" href="../uguide/glossary.html#term-Federated-System"><span class="xref std std-term">distributed or federated systems</span></a>.</p></li>
<li><p>Users may choose to extend the Dragon native API with their own composite objects, using Dragons
native, client and core APIs for maximum flexibility.</p></li>
<li><p>User may want to use only the Dragon core components to extend their own programs with its components. In
that case the infrastructure components of Dragon do not need to be started, Dragon core components can be
<a class="reference internal" href="dragon_multiprocessing.html#multiprocessing-and-dragon-without-patching"><span class="std std-ref">directly imported and used</span></a>.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="owner.html" class="btn btn-neutral float-left" title="Ownership, Placement and Locality" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../cbook/cbook.html" class="btn btn-neutral float-right" title="Solution Cookbook" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>