<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dragon.infrastructure.util &mdash; Dragon  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Dragon
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uguide/uguide.html">Users Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pguide/pguide.html">Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cbook/cbook.html">Solution Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../benchmarks/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infrastructure/infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/components.html">Low-level Components</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Dragon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">dragon.infrastructure.util</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/ref/inf/dragon.infrastructure.util.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-dragon.infrastructure.util">
<span id="dragon-infrastructure-util"></span><h1>dragon.infrastructure.util<a class="headerlink" href="#module-dragon.infrastructure.util" title="Permalink to this heading"></a></h1>
<p>Python infrastructure utilities.</p>
<p>This file is where to put useful internal utilities and wrappers and stuff.</p>
<p>It’s also to solve the problem of ‘I don’t know what the right long term way is
to do something, but I need a version of it now to make progress’.  The
initial solution here makes all the uses consistent and we can refactor more
easily if it needs to change.</p>
<p>Rules of engagement:</p>
<p>Anyone can put anything into this file.</p>
<p>Nothing in here is user facing.</p>
<p>Once there are a few things doing similar kinds of things in this file,
they need to be broken out into another file.</p>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dragon.infrastructure.util.compare_dev_shm" title="dragon.infrastructure.util.compare_dev_shm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compare_dev_shm</span></code></a>(previous)</p></td>
<td><p>Warns if there are files owned by current user in /dev/shm not previously seen</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">enable_logging</span></code>([level])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dragon.infrastructure.util.get_host_info" title="dragon.infrastructure.util.get_host_info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_host_info</span></code></a>(network_prefix)</p></td>
<td><p>Return username, hostname, and list of IP addresses.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">mk_fifo_debugger</span></code>(basename, *[, ...])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">port_check</span></code>(ip_port)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dragon.infrastructure.util.range_expr" title="dragon.infrastructure.util.range_expr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">range_expr</span></code></a>(s[, prog])</p></td>
<td><p>Return iterable corresponding to the given range expression of the form START[-STOP[:STEP]][,...].</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dragon.infrastructure.util.route" title="dragon.infrastructure.util.route"><code class="xref py py-obj docutils literal notranslate"><span class="pre">route</span></code></a>(msg_type, routing_table[, metadata])</p></td>
<td><p>Decorator routing adapter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dragon.infrastructure.util.survey_dev_shm" title="dragon.infrastructure.util.survey_dev_shm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">survey_dev_shm</span></code></a>()</p></td>
<td><p>Looks at what is in /dev/shm owned by current user</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dragon.infrastructure.util.to_str" title="dragon.infrastructure.util.to_str"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_str</span></code></a>(x)</p></td>
<td><p>Convert anything to a string</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dragon.infrastructure.util.to_str_iter" title="dragon.infrastructure.util.to_str_iter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_str_iter</span></code></a>(seq)</p></td>
<td><p>Iterate over sequence yielding string conversion of each item.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">user_print</span></code>(*args, **kwargs)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dragon.infrastructure.util.AbsorbingChannel" title="dragon.infrastructure.util.AbsorbingChannel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AbsorbingChannel</span></code></a></p></td>
<td><p>Object that absorbs all sends, remembering the last one; useful in GS</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dragon.infrastructure.util.NewlineStreamWrapper" title="dragon.infrastructure.util.NewlineStreamWrapper"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NewlineStreamWrapper</span></code></a></p></td>
<td><p>Helper class for sending json objects through streams.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dragon.infrastructure.util.PriorityMultiMap" title="dragon.infrastructure.util.PriorityMultiMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PriorityMultiMap</span></code></a></p></td>
<td><p>Class combining a multimap with a priority queue to allow timeouts.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="dragon.infrastructure.util.NewlineStreamWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">NewlineStreamWrapper</span></span><a class="headerlink" href="#dragon.infrastructure.util.NewlineStreamWrapper" title="Permalink to this definition"></a></dt>
<dd><p>Helper class for sending json objects through streams.</p>
<p>This class sends newline-delimited newline-free strings
through streams with an interface similar to multiprocessing.Connection.</p>
<p>It is used for sending around JSON-encoded infrastructure
messages through streams and in testing.</p>
<p>TODO: consider whether this belongs in base code.  It feels more
like something that should only be in a test bench.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.NewlineStreamWrapper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.NewlineStreamWrapper.__init__" title="Permalink to this definition"></a></dt>
<dd><p>read_intent and write_intent are used to ensure
clients are using the right operations on the stream.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.NewlineStreamWrapper.send">
<span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.NewlineStreamWrapper.send" title="Permalink to this definition"></a></dt>
<dd><p>Perform the write operation of the given data into the stream.
Assert that the write_intent is set, ensuring the client is using the
right operation on the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>string</em>) – data to be written into the stream</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.NewlineStreamWrapper.recv">
<span class="sig-name descname"><span class="pre">recv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.NewlineStreamWrapper.recv" title="Permalink to this definition"></a></dt>
<dd><p>Perform the read operation on the stream. Assert that the read_intent
is set, ensuring the client is using the right operation on the stream.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.NewlineStreamWrapper.poll">
<span class="sig-name descname"><span class="pre">poll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.NewlineStreamWrapper.poll" title="Permalink to this definition"></a></dt>
<dd><p>Poll for the read I/O events on the registered file objects of type stream.
Collect the selector if already set and its associated events, else the default
selector and register with the read event, to wait upon. Also, assert that the
ride_intent is set, ensuring the client is using the right operation on the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em><em>, </em><em>defaults to 0</em>) – If timeout &gt; 0, specifies the maximum wait time in seconds</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if read I/O event is ready on the selected stream</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.NewlineStreamWrapper.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.NewlineStreamWrapper.close" title="Permalink to this definition"></a></dt>
<dd><p>Close thes selector and the associated stream</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PriorityMultiMap</span></span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap" title="Permalink to this definition"></a></dt>
<dd><p>Class combining a multimap with a priority queue to allow timeouts.</p>
<p>Correct behavior relies on keys never being reused.</p>
<p>This is used in Global Services to manage requests for timeout
notification from multiple sources.</p>
<p>TODO: this needs some unit tests
TODO: consider reimplementing in terms of a collections.Counter object!</p>
<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap.put" title="Permalink to this definition"></a></dt>
<dd><p>Store (key, value) pair to the map (internal items), used by the global requests
to manage timeout requests with the associated deadlines of multiple sources.
Can be used for all channels, pools, and processes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>string</em>) – identifier of the requested source(typically name)</p></li>
<li><p><strong>value</strong> (<em>int</em>) – value of the identifier(typically id)</p></li>
<li><p><strong>timeout</strong> (<em>int</em><em>, </em><em>defaults to Nonde</em>) – used to evaluate the deadline of the (key, value) pair, if provided</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap.time_left">
<span class="sig-name descname"><span class="pre">time_left</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap.time_left" title="Permalink to this definition"></a></dt>
<dd><p>Provides the deadline (if stored) for the given (key, value) pair.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>string</em>) – identifier of the source</p></li>
<li><p><strong>value</strong> (<em>int</em>) – value of the identifier</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>timeout/deadline of the given (key, value) pair</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap.get" title="Permalink to this definition"></a></dt>
<dd><p>Provides the value for the stored key in the map</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>string</em>) – identifier of the source</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the identifier</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap.next_deadline">
<span class="sig-name descname"><span class="pre">next_deadline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap.next_deadline" title="Permalink to this definition"></a></dt>
<dd><p>Returns the timeout/deadline of the front item in the timeout priority queue, if present</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the deadline</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap.get_timed_out">
<span class="sig-name descname"><span class="pre">get_timed_out</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap.get_timed_out" title="Permalink to this definition"></a></dt>
<dd><p>Remove all the requests in the timeout priority queue, taking the opportunity to
clear the associated deadlines and the dead keys</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of all the (key, value) tuples of the timed out requests</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap.remove" title="Permalink to this definition"></a></dt>
<dd><p>Removes the source from the map, with all the values of it placed in the queue,
along with the timeout/deadline management of the source</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>k</strong> (<em>string</em>) – identifier of the object/source(typically name)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap.remove_one">
<span class="sig-name descname"><span class="pre">remove_one</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap.remove_one" title="Permalink to this definition"></a></dt>
<dd><p>Removes the request of a particular source placed in the queue,
along with removing the timeout/deadline management of the associated source, if set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>k</strong> (<em>string</em>) – identifier of the source(typically name)</p></li>
<li><p><strong>v</strong> (<em>int</em>) – value of the identifier(typically id)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap.keys" title="Permalink to this definition"></a></dt>
<dd><p>Helps with all the keys of the global requests placed in the priority map</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of all the keys of the queue items</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap.values">
<span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap.values" title="Permalink to this definition"></a></dt>
<dd><p>Helps with all the values of the global requests placed in the priority map</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of all the values of the queue items</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.PriorityMultiMap.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.PriorityMultiMap.items" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Helps with all the items(key, value) pairs of the</dt><dd><p>global requests placed in the priority map</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of all the tuples(key, value) of the queue items</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dragon.infrastructure.util.AbsorbingChannel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">AbsorbingChannel</span></span><a class="headerlink" href="#dragon.infrastructure.util.AbsorbingChannel" title="Permalink to this definition"></a></dt>
<dd><p>Object that absorbs all sends, remembering the last one; useful in GS</p>
<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.util.AbsorbingChannel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.AbsorbingChannel.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dragon.infrastructure.util.survey_dev_shm">
<span class="sig-name descname"><span class="pre">survey_dev_shm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.survey_dev_shm" title="Permalink to this definition"></a></dt>
<dd><p>Looks at what is in /dev/shm owned by current user</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>set of filenames owned by current user in /dev/shm</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dragon.infrastructure.util.compare_dev_shm">
<span class="sig-name descname"><span class="pre">compare_dev_shm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">previous</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.compare_dev_shm" title="Permalink to this definition"></a></dt>
<dd><p>Warns if there are files owned by current user in /dev/shm not previously seen</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>previous</strong> – set of previously seen filenames</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dragon.infrastructure.util.route">
<span class="sig-name descname"><span class="pre">route</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">routing_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.route" title="Permalink to this definition"></a></dt>
<dd><p>Decorator routing adapter.</p>
<p>This is a function decorator used to accumulate handlers for a particular
kind of message into a routing table indexed by type, used
by server classes processing infrastructure messages.</p>
<p>The routing table is usually a class attribute and the message type
is typically an infrastructure message.  The metadata, if used,
is typically information used to check that the state the server object
is in, is appropriate for that type of message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg_type</strong> – the type of an infrastructure message class</p></li>
<li><p><strong>routing_table</strong> – dict, indexed by msg_type with values a tuple (function, metadata)</p></li>
<li><p><strong>metadata</strong> – metadata to check before function is called, usage dependent</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the function.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dragon.infrastructure.util.to_str">
<span class="sig-name descname"><span class="pre">to_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.to_str" title="Permalink to this definition"></a></dt>
<dd><p>Convert anything to a string</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dragon.infrastructure.util.to_str_iter">
<span class="sig-name descname"><span class="pre">to_str_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.util.to_str_iter" title="Permalink to this definition"></a></dt>
<dd><p>Iterate over sequence yielding string conversion of each item.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; list(_to_str_iter([&#39;hello&#39;, &#39;hello&#39;.encode(), Path(&#39;/hello&#39;), None, 0, False]))
[&#39;hello&#39;, &#39;hello&#39;, &#39;/hello&#39;, &#39;&#39;, &#39;0&#39;, &#39;False&#39;]
&gt;&gt;&gt; list(_to_str_iter(&#39;hello&#39;))
[&#39;hello&#39;]
&gt;&gt;&gt; list(_to_str_iter(&#39;hello&#39;.encode()))
[&#39;hello&#39;]
&gt;&gt;&gt; list(_to_str_iter(pathlib.Path(&#39;/hello&#39;)))
[&#39;/hello&#39;]
&gt;&gt;&gt; list(_to_str_iter(None))
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
File &quot;&lt;stdin&gt;&quot;, line 30, in _to_str_iter
TypeError: &#39;NoneType&#39; object is not iterable
&gt;&gt;&gt; list(_to_str_iter(0))
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
File &quot;&lt;stdin&gt;&quot;, line 7, in _to_str_iter
TypeError: &#39;int&#39; object is not iterable
&gt;&gt;&gt; list(_to_str_iter(False))
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
File &quot;&lt;stdin&gt;&quot;, line 7, in _to_str_iter
TypeError: &#39;bool&#39; object is not iterable
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dragon.infrastructure.util.range_expr">
<span class="sig-name descname"><span class="pre">range_expr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prog</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Pattern</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">re.compile('(?P&lt;start&gt;\\d+)(?:-(?P&lt;stop&gt;\\d+)(?::(?P&lt;step&gt;\\d+))?)?$')</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#dragon.infrastructure.util.range_expr" title="Permalink to this definition"></a></dt>
<dd><p>Return iterable corresponding to the given range expression of
the form START[-STOP[:STEP]][,…].</p>
<p>NOTE: Range expressions are intended to be compatible with the –cpu-list
expressions from taskset(1).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">tuple</span><span class="p">(</span><span class="n">range_expr</span><span class="p">(</span><span class="s1">&#39;0-10:2&#39;</span><span class="p">))</span>
<span class="go">(0, 2, 4, 6, 8, 10)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">tuple</span><span class="p">(</span><span class="n">range_expr</span><span class="p">(</span><span class="s1">&#39;0-10:2,0-10:3&#39;</span><span class="p">))</span>
<span class="go">(0, 2, 4, 6, 8, 10, 0, 3, 6, 9)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">set</span><span class="p">(</span><span class="n">range_expr</span><span class="p">(</span><span class="s1">&#39;0-10:2,0-10:3&#39;</span><span class="p">))</span>
<span class="go">{0, 2, 3, 4, 6, 8, 9, 10}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dragon.infrastructure.util.get_host_info">
<span class="sig-name descname"><span class="pre">get_host_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network_prefix</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#dragon.infrastructure.util.get_host_info" title="Permalink to this definition"></a></dt>
<dd><p>Return username, hostname, and list of IP addresses.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>