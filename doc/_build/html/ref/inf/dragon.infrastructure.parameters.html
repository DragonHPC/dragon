<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dragon.infrastructure.parameters &mdash; Dragon  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Dragon
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uguide/uguide.html">Users Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pguide/pguide.html">Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cbook/cbook.html">Solution Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../benchmarks/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infrastructure/infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/components.html">Low-level Components</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Dragon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">dragon.infrastructure.parameters</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/ref/inf/dragon.infrastructure.parameters.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-dragon.infrastructure.parameters">
<span id="dragon-infrastructure-parameters"></span><h1>dragon.infrastructure.parameters<a class="headerlink" href="#module-dragon.infrastructure.parameters" title="Permalink to this heading"></a></h1>
<p>Launch parameters for Dragon infrastructure and managed processes</p>
<p>Dragon processes that get launched need a number of parameters explaining
the size of the allocation, which node they are on, and other information
needed to bootstrap communication to the infrastructure itself.</p>
<p>It isn’t reasonable to provide these on the command line, so they are instead
passed through environment variables managed by this module.</p>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">cast_return_when_mode</span></code>(return_when)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">cast_wait_mode</span></code>(wait_mode)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_base64</span></code>(strdata)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_mode</span></code>(mode)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_pool</span></code>(pool)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">nocast</span></code>(x)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">nocheck</span></code>(dummy)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">nonnegative</span></code>(x)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">positive</span></code>(x)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dragon.infrastructure.parameters.LaunchParameters" title="dragon.infrastructure.parameters.LaunchParameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LaunchParameters</span></code></a></p></td>
<td><p>Launch Parameters for Dragon processes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dragon.infrastructure.parameters.Policy" title="dragon.infrastructure.parameters.Policy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Policy</span></code></a></p></td>
<td><p>Used to encapsulate policy decisions.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dragon.infrastructure.parameters.TypedParm" title="dragon.infrastructure.parameters.TypedParm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TypedParm</span></code></a></p></td>
<td><p>Defines a parameter and how it is to be checked.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Exceptions</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dragon.infrastructure.parameters.ParmError" title="dragon.infrastructure.parameters.ParmError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ParmError</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py exception">
<dt class="sig sig-object py" id="dragon.infrastructure.parameters.ParmError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ParmError</span></span><a class="headerlink" href="#dragon.infrastructure.parameters.ParmError" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dragon.infrastructure.parameters.TypedParm">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TypedParm</span></span><a class="headerlink" href="#dragon.infrastructure.parameters.TypedParm" title="Permalink to this definition"></a></dt>
<dd><p>Defines a parameter and how it is to be checked.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><p>name: string name of parameter, as env variable comes out as DRAGON_name
cast: callable to cast the string parameter to what it should be
check: had better be True, call on output of cast
default: default value for parameter; default/default is None</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.parameters.TypedParm.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.parameters.TypedParm.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dragon.infrastructure.parameters.LaunchParameters">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">LaunchParameters</span></span><a class="headerlink" href="#dragon.infrastructure.parameters.LaunchParameters" title="Permalink to this definition"></a></dt>
<dd><p>Launch Parameters for Dragon processes.</p>
<p>This class contains the basic runtime parameters for Dragon infrastructure
and managed processes.</p>
<p>The parameter names are available in the environment of every Dragon managed
process with the prefix <code class="code docutils literal notranslate"><span class="pre">DRAGON_</span></code>. E.g. <code class="code docutils literal notranslate"><span class="pre">DRAGON_MY_PUID</span></code> for <code class="code docutils literal notranslate"><span class="pre">MY_PUID</span></code>. Setting
some of these parameters will alter runtime behaviour. E.g. setting
<code class="code docutils literal notranslate"><span class="pre">DRAGON_DEBUG=1</span></code> in the environment before starting the runtime, will setup the
runtime in debug mode and result in verbose log files.</p>
<p>The parameter names are available as attributes with lower cased names in
Python.</p>
<p>The following launch parameters are defined</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>MODE</strong> (<em>str</em>) – Startup mode of the infrastructure, one of <code class="code docutils literal notranslate"><span class="pre">'crayhpe-multi'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'single'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'test'</span></code>, defaults to <code class="code docutils literal notranslate"><span class="pre">'test'</span></code>.</p></li>
<li><p><strong>INDEX</strong> (<em>int</em>) – Internal non-negative index of the current node, defaults to 0.</p></li>
<li><p><strong>DEFAULT_PD</strong> (<em>str</em>) – Base64 encoded serialized descriptor of the default user memory pool, defaults to ‘’.</p></li>
<li><p><strong>INF_PD</strong> (<em>str</em>) – Base64 encoded serialized descriptor of the default infrastructure memory pool, defaults to ‘’.</p></li>
<li><p><strong>LOCAL_SHEP_CD</strong> (<em>str</em>) – Base64 encoded serialized descriptor of the channel to send to the local services on the same node, defaults to ‘’.</p></li>
<li><p><strong>LOCAL_BE_CD</strong> (<em>str</em>) – Base64 encoded serialized descriptor of the channel to send to the launcher backend on the same node, defaults to ‘’.</p></li>
<li><p><strong>GS_CD</strong> (<em>str</em>) – Base64 encoded serialized descriptor of the channel to send to global services, defaults to ‘’.</p></li>
<li><p><strong>GS_RET_CD</strong> (<em>str</em>) – Base64 encoded serialized descriptor of the channel to receive from global services, defaults to ‘’.</p></li>
<li><p><strong>SHEP_RET_CD</strong> (<em>str</em>) – Base64 encoded serialized descriptor of the channel to receive from the local services on the same node, defaults to ‘’.</p></li>
<li><p><strong>DEFAULT_SEG_SZ</strong> (<em>int</em>) – Size of the default user managed memory pool in bytes, defaults to 2**32.</p></li>
<li><p><strong>INF_SEG_SZ</strong> (<em>int</em>) – Size of the default infrastructure managed memory pool in bytes, defaults to 2**30.</p></li>
<li><p><strong>MY_PUID</strong> (<em>int</em>) – Unique process ID (<code class="code docutils literal notranslate"><span class="pre">puid</span></code>) given to this process by global services, defaults to 1.</p></li>
<li><p><strong>TEST</strong> (<em>int</em>) – if in test mode, defaults to 0.</p></li>
<li><p><strong>DEBUG</strong> (<em>int</em>) – if in debug mode, defaults to 0.</p></li>
<li><p><strong>BE_CUID</strong> (<em>int</em>) – Unique channel ID (<code class="code docutils literal notranslate"><span class="pre">cuid</span></code>) of the launcher backend on this node, defaults to 2**60.</p></li>
<li><p><strong>INF_WAIT_MODE</strong> (<em>str</em>) – Default wait mode of infrastructure objects. One of <code class="code docutils literal notranslate"><span class="pre">'IDLE_WAIT'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'SPIN_WAIT'</span></code>, or <code class="code docutils literal notranslate"><span class="pre">'ADAPTIVE_WAIT'</span></code>. Defaults to <code class="code docutils literal notranslate"><span class="pre">'IDLE_WAIT'</span></code>.</p></li>
<li><p><strong>USER_WAIT_MODE</strong> (<em>str</em>) – Default wait mode of user objects. One of <code class="code docutils literal notranslate"><span class="pre">'IDLE_WAIT'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'SPIN_WAIT'</span></code>, , or <code class="code docutils literal notranslate"><span class="pre">'ADAPTIVE_WAIT'</span></code>. defaults to <code class="code docutils literal notranslate"><span class="pre">'ADAPTIVE_WAIT'</span></code>.</p></li>
<li><p><strong>INF_RETURN_WHEN_MODE</strong> (<em>str</em>) – Default return mode for infrastructure objects. One of <code class="code docutils literal notranslate"><span class="pre">'WHEN_IMMEDIATE'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'WHEN_BUFFERED'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'WHEN_DEPOSITED'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'WHEN_RECEIVED'</span></code>, defaults to <code class="code docutils literal notranslate"><span class="pre">'WHEN_BUFFERED'</span></code>.</p></li>
<li><p><strong>USER_RETURN_WHEN_MODE</strong> (<em>str</em>) – Default return mode for user objects. One of <code class="code docutils literal notranslate"><span class="pre">'WHEN_IMMEDIATE'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'WHEN_BUFFERED'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'WHEN_DEPOSITED'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'WHEN_RECEIVED'</span></code>, defaults to <code class="code docutils literal notranslate"><span class="pre">'WHEN_DEPOSITED'</span></code>.</p></li>
<li><p><strong>GW_CAPACITY</strong> (<em>int</em>) – Positive capacity of gateway channels, defaults to 2048.</p></li>
<li><p><strong>PMOD_COMMUNICATION_TIMEOUT</strong> (<em>int</em>) – Timeout in seconds for PMOD communication with child MPI processes, defaults to 30.</p></li>
<li><p><strong>BASEPOOL</strong> (<em>str</em>) – Default implementation of multiprocessing pool. One of <code class="code docutils literal notranslate"><span class="pre">'NATIVE'</span></code> or <code class="code docutils literal notranslate"><span class="pre">'PATCHED'</span></code>, defaults to <code class="code docutils literal notranslate"><span class="pre">'NATIVE'</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.parameters.LaunchParameters.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.parameters.LaunchParameters.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.parameters.LaunchParameters.env">
<span class="sig-name descname"><span class="pre">env</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.parameters.LaunchParameters.env" title="Permalink to this definition"></a></dt>
<dd><p>Returns dictionary of environment variables for this object.</p>
<p>An entry is created for parameters that are not None and are listed in
LaunchParameters.Parms, with the correctly prefixed name of the
environment variable and so on.</p>
<p>The reason for this option is to let a process or actor construct
the launch parameters it wants to have for another process
it is getting ready to start.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dragon.infrastructure.parameters.Policy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Policy</span></span><a class="headerlink" href="#dragon.infrastructure.parameters.Policy" title="Permalink to this definition"></a></dt>
<dd><p>Used to encapsulate policy decisions.</p>
<p>An instance of this class can be used to configure the policy decisions
made within code as shown. Right now it includes the wait mode. But it
is intended to include other configurable policy decisions in the future
like affinity.</p>
<p>There are two constant instances of Policy that are created as
POLICY_INFRASTRUCTURE and POLICY_USER as defaults for both
infrastructure and user program resources.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dragon.infrastructure.parameters.Policy.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wait_mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_from_send_when</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.infrastructure.parameters.Policy.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>