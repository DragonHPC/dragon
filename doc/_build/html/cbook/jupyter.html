<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Running Jupyter Notebook inside of the Dragon &mdash; Dragon  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Parallel Merge Sort" href="mp_merge_sort.html" />
    <link rel="prev" title="Solution Cookbook" href="cbook.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Dragon
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uguide/uguide.html">Users Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pguide/pguide.html">Programming Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="cbook.html">Solution Cookbook</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="cbook.html#multiprocessing-with-dragon">Multiprocessing with Dragon</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Running Jupyter Notebook inside of the Dragon</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#single-node-jupyter-on-a-desktop-or-laptop">Single Node Jupyter on a Desktop or Laptop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multi-node-jupyter">Multi Node Jupyter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mp_merge_sort.html">Parallel Merge Sort</a></li>
<li class="toctree-l3"><a class="reference internal" href="mp_queue_demo.html">Parallel Producer - Consumer Communication with Queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="mp_scipy_image.html">SciPy Image Convolution Benchmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="torch-scipy-telemetry.html">Multi-node process orchestration and node telemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="distr-inf-telemetry.html">Distributed inference with a Large Language Model (LLM) and node telemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="pipeline.html">Creating and Using a Pipeline with Multiprocessing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cbook.html#dragon-native">Dragon Native</a></li>
<li class="toctree-l2"><a class="reference internal" href="cbook.html#dragon-data-preview">Dragon Data (Preview)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/ref.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components/components.html">Low-level Components</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Dragon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="cbook.html">Solution Cookbook</a></li>
      <li class="breadcrumb-item active">Running Jupyter Notebook inside of the Dragon</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/cbook/jupyter.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="running-jupyter-notebook-inside-of-the-dragon">
<h1>Running Jupyter Notebook inside of the Dragon<a class="headerlink" href="#running-jupyter-notebook-inside-of-the-dragon" title="Permalink to this heading"></a></h1>
<p>It is possible to run a Jupyter notebook inside of Dragon. This gives the user of
the notebook full access to the distributed multi-node implementation of
multiprocessing that is provided by the Dragon run-time services.</p>
<p>There are two modes of Dragon, the single node version and the multi node
version. The single node version, running locally on a laptop or desktop computer
requires a little less setup. The multi node version, depending on your network
configuration, requires some port forwarding to get the jupyter kernel server
port to an externally visible location.</p>
<section id="single-node-jupyter-on-a-desktop-or-laptop">
<h2>Single Node Jupyter on a Desktop or Laptop<a class="headerlink" href="#single-node-jupyter-on-a-desktop-or-laptop" title="Permalink to this heading"></a></h2>
<p>To start
jupyter locally, you need to make sure you have a correct installation of
Dragon which has installed all the Python requirements. For instance, the
jupyter package must be pip installed if it is not available. You can check
this by starting up the Python REPL (Read/Eval/Print Loop) and trying <em>import
jupyter</em>. If that succeeds, you have the jupyter package installed. Once you
have the prerequisites for Dragon and Jupyter, you can proceed as follows.</p>
<p>Within the <em>examples</em> directory is a subdirectory named <em>jupyter</em>. Go to that
directory and execute the <em>start_jupyter.py</em> program as indicated here.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>root ➜ /workspaces/hpc-pe-dragon-dragon $ cd examples/jupyter/
<span class="linenos"> 2</span>root ➜ /workspaces/hpc-pe-dragon-dragon/examples/jupyter $ dragon start_jupyter.py
<span class="linenos"> 3</span>[I 19:10:33.781 NotebookApp] Writing notebook server cookie secret to /root/.local/share/jupyter/runtime/notebook_cookie_secret
<span class="linenos"> 4</span>[I 19:10:34.424 NotebookApp] Serving notebooks from local directory: /workspaces/hpc-pe-dragon-dragon/examples/jupyter
<span class="linenos"> 5</span>[I 19:10:34.424 NotebookApp] Jupyter Notebook 6.5.2 is running at:
<span class="linenos"> 6</span>[I 19:10:34.424 NotebookApp] http://0234599f72d3:8888/?token=961a1ff02c724743eccf2b24fbfc89559b77c9ad1f421d60
<span class="linenos"> 7</span>[I 19:10:34.424 NotebookApp]  or http://127.0.0.1:8888/?token=961a1ff02c724743eccf2b24fbfc89559b77c9ad1f421d60
<span class="linenos"> 8</span>[I 19:10:34.424 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
<span class="linenos"> 9</span>[C 19:10:34.429 NotebookApp]
<span class="linenos">10</span>
<span class="linenos">11</span>    To access the notebook, open this file in a browser:
<span class="linenos">12</span>        file:///root/.local/share/jupyter/runtime/nbserver-10193-open.html
<span class="linenos">13</span>    Or copy and paste one of these URLs:
<span class="linenos">14</span>        http://0234599f72d3:8888/?token=961a1ff02c724743eccf2b24fbfc89559b77c9ad1f421d60
<span class="linenos">15</span>    or http://127.0.0.1:8888/?token=961a1ff02c724743eccf2b24fbfc89559b77c9ad1f421d60
</pre></div>
</div>
<p>You will see output like what is shown here. The last line, the 127 local address can be pasted into a webbrowser to
start up Jupyter on your local machine running inside the Dragon run-time. If you open the JupyterDragon notebook
that you see in the examples directory, you can execute the cells in it to give you a brief introduction to using
Dragon’s implementation of Python multiprocessing.</p>
<p>When you are done, a Ctl-C in the terminal where you started the jupyter server will bring it all down and exit
the Dragon run-time services.</p>
</section>
<section id="multi-node-jupyter">
<h2>Multi Node Jupyter<a class="headerlink" href="#multi-node-jupyter" title="Permalink to this heading"></a></h2>
<p>To run a Jupyter Notebook inside of Dragon in a multinode setup, you must first
get an allocation on your system of choice. Once you have an allocation, you can
then run, with dragon, the same command as in the single node case. When you do so,
you’ll see output as shown above. Then you have to set up a tunnel to your laptop
to run the Jupyter notebook. It is likely that the tunnel has to go through the login
node of the machine. So, on the login node you start a tunnel.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>ssh -NL localhost:1234:localhost:8888 &lt;user@node&gt;
</pre></div>
</div>
<p>Then, on your laptop you start another tunnel.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>ssh -NL localhost:1234:localhost:1234 &lt;user@system_name&gt;
</pre></div>
</div>
<p>This will allow you to connect on your laptop to port 1234. If that port were taken, you can use
whatever port you like. The first time you connect you’ll be asked for a token. The token
it refers to is the token in the URL that was printed to the login node when the start_jupyter.py
program was run.</p>
<p>That’s it. You now have the ability to create Jupyter Notebooks with full access to all the
nodes in your supercomputer allocation.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cbook.html" class="btn btn-neutral float-left" title="Solution Cookbook" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mp_merge_sort.html" class="btn btn-neutral float-right" title="Parallel Merge Sort" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>