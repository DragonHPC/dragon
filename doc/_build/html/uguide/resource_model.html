<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Dragon HPC Resource Model &mdash; Dragon  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Glossary" href="glossary.html" />
    <link rel="prev" title="Running Dragon" href="running_dragon.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Dragon
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../start/start.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="uguide.html">Users Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="running_dragon.html">Running Dragon</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">The Dragon HPC Resource Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#object-hierarchy">Object Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#group-of-resources">Group of resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-costs">Performance Costs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#policies">Policies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pguide/pguide.html">Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cbook/cbook.html">Solution Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/ref.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components/components.html">Low-level Components</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Dragon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="uguide.html">Users Guide</a></li>
      <li class="breadcrumb-item active">The Dragon HPC Resource Model</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/uguide/resource_model.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-dragon-hpc-resource-model">
<h1>The Dragon HPC Resource Model<a class="headerlink" href="#the-dragon-hpc-resource-model" title="Permalink to this heading"></a></h1>
<p>Programming for multi-system and/or cloud-like infrastructure will either be
explicit or <a class="reference internal" href="glossary.html#term-Transparency"><span class="xref std std-term">transparent</span></a>. Explicit programming means
writing provider-specific code (e.g., AWS API, Azure API, workload manager
scripts for HPC). Each of these can be considered as having a resource model.
The resources are typically physical hardware, such as <a class="reference internal" href="glossary.html#term-Node"><span class="xref std std-term">nodes</span></a>, and
users are limited in the abstractions that can exist over the resources. The
Dragon HPC Resource Model enables <a class="reference internal" href="glossary.html#term-Transparency"><span class="xref std std-term">transparent</span></a> programming
over <a class="reference internal" href="glossary.html#term-System-Resource"><span class="xref std std-term">physical resources</span></a> through logical resource
abstractions. At the same time, users have access to information about the
<a class="reference internal" href="../pguide/owner.html#ownership-placement-and-locality"><span class="std std-ref">physical placement</span></a>
of logical resources and optional control over the policy of
logical resources, including placement. With a transparent programming model,
users can write sophisticated applications and <a class="reference internal" href="glossary.html#term-Workflow"><span class="xref std std-term">workflows</span></a> once
and have them port across laptops, cloud, <a class="reference internal" href="glossary.html#term-Distributed-System"><span class="xref std std-term">supercomputers</span></a>, and
<a class="reference internal" href="glossary.html#term-Federated-System"><span class="xref std std-term">federated multi-system environments</span></a>.</p>
<p>Dragon implements a resource model inspired by Python Multiprocessing, which has
abstractions proven to be productive for users writing applications and
workflows. The Dragon HPC Resource Model takes these concepts and makes them
accessible across programming languages so that processes of all types that may
make up a workflow can all directly interact through the objects in the resource
model.</p>
<p>All objects in the Dragon HPC Resource Model
(the <a class="reference internal" href="../pguide/stack.html#the-api-stack"><span class="std std-ref">Dragon Native API</span></a>) exist to one of two modes within
the run-time: <a class="reference internal" href="glossary.html#term-Managed-Object"><span class="xref std std-term">managed</span></a> and <a class="reference internal" href="glossary.html#term-Unmanaged-Object"><span class="xref std std-term">unmanaged</span></a>.
Most users will write applications and <a class="reference internal" href="glossary.html#term-Workflow"><span class="xref std std-term">workflows</span></a>
with <a class="reference internal" href="glossary.html#term-Managed-Object"><span class="xref std std-term">managed objects</span></a>, allowing the Dragon run-time to control the burden of
life-cycle management of the objects and provide discoverability.</p>
<p>The Dragon run-time itself, and some use cases, require lower-level control of
the objects in order to instantiate the objects into node-local memory. These
cases will use <a class="reference internal" href="glossary.html#term-Unmanaged-Object"><span class="xref std std-term">unmanaged objects</span></a>.</p>
<p>Once instantiated, objects can be shared once a process has a valid handle to
it. We call this handle a <a class="reference internal" href="glossary.html#term-Serialized-Descriptor"><span class="xref std std-term">Serialized Descriptor</span></a>, it can be passed
between processes via stdin, sockets, pipes or any other form of communication to
enable two processes to use the same object.
As this can become cumbersome to program, <a class="reference internal" href="glossary.html#term-Managed-Object"><span class="xref std std-term">managed objects</span></a>
can be further identified by their user defined <a class="reference internal" href="glossary.html#term-Object-Name"><span class="xref std std-term">name</span></a> or run-time defined
<a class="reference internal" href="glossary.html#term-Object-UID"><span class="xref std std-term">unique ID</span></a>. Both are held by the Dragon run-time services, and
if an object is created a second time with the same name, the run-time will instead return
the existing object to the process.</p>
<section id="object-hierarchy">
<h2>Object Hierarchy<a class="headerlink" href="#object-hierarchy" title="Permalink to this heading"></a></h2>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="../_images/dragon_object_hierarchy.png"><img alt="../_images/dragon_object_hierarchy.png" src="../_images/dragon_object_hierarchy.png" style="width: 639.0px; height: 364.5px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3 </span><span class="caption-text"><strong>Figure 1: A representation of the Dragon object hierarchy across Dragon Native API and Client API. Not all derived objects are shown.</strong></span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>All Dragon objects are built from four <a class="reference internal" href="glossary.html#term-Primary-Object"><span class="xref std std-term">primary objects</span></a> on top of the
<a class="reference internal" href="../pguide/stack.html#the-api-stack"><span class="std std-ref">Dragon Client API</span></a> that represent fundamental
<a class="reference internal" href="glossary.html#term-System-Resource"><span class="xref std std-term">resource</span></a> abstractions (see figure 1):</p>
<ol class="arabic simple">
<li><p><strong>Process</strong>: A POSIX process that is tracked by the Dragon run-time services.</p></li>
<li><p><strong>Memory pool</strong>: A block of shared memory managed by the Dragon run-time services that programs can allocate from.</p></li>
<li><p><strong>Channel</strong>: A communications primitive used to send and receive messages managed by the Dragon run-time services</p></li>
<li><p><strong>Node</strong>: A <a class="reference internal" href="glossary.html#term-Node"><span class="xref std std-term">Node</span></a> used by the Dragon run-time services to host resources. The abstraction mostly contains hardware information.</p></li>
</ol>
<p>Derived objects use the four primary objects to provide convenient abstractions
to the programmer in the <a class="reference internal" href="../ref/native/index.html#dragon-native"><span class="std std-ref">Dragon Native</span></a> API. If these objects
are managed; they are identified by a unique name and ID, unmanaged objects are identified
only by their serialized descriptors. Examples of <a class="reference internal" href="glossary.html#term-Managed-Object"><span class="xref std std-term">managed objects</span></a> are
<a class="reference internal" href="../ref/native/Python/dragon.native.queue.html#module-dragon.native.queue" title="dragon.native.queue"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">Queue</span></code></a>, <a class="reference internal" href="../ref/native/Python/dragon.native.lock.html#module-dragon.native.lock" title="dragon.native.lock"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">Lock</span></code></a>,
<a class="reference internal" href="../ref/native/Python/dragon.native.event.html#module-dragon.native.event" title="dragon.native.event"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">Event</span></code></a></p>
<p>Python Multiprocessing with Dragon objects are always managed and refcounted. As
they are based on their Dragon Native counterparts, the objects are
interoperable. To this end, the <a class="reference internal" href="../ref/native/index.html#dragon-native"><span class="std std-ref">Dragon Native</span></a> API
extends the Python Multiprocessing API into C, C++ and Fortran.</p>
<p>See also <a class="reference internal" href="../pguide/stack.html#the-api-stack"><span class="std std-ref">The API Stack</span></a>.</p>
</section>
<section id="group-of-resources">
<h2>Group of resources<a class="headerlink" href="#group-of-resources" title="Permalink to this heading"></a></h2>
<p>A Group of resources or <a class="reference internal" href="../ref/client/dragon.globalservices.group.html#module-dragon.globalservices.group" title="dragon.globalservices.group"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">GSGroup</span></code></a> is a primary resource component that includes as
its members combinations of the Dragon primary objects (processes, channels, pools, nodes).
A Global Services Client API is provided for the <a class="reference internal" href="../ref/client/dragon.globalservices.group.html#module-dragon.globalservices.group" title="dragon.globalservices.group"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">GSGroup</span></code></a> object and is described
here.</p>
<p>Every <a class="reference internal" href="../ref/client/dragon.globalservices.group.html#module-dragon.globalservices.group" title="dragon.globalservices.group"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">GSGroup</span></code></a> is described uniquely by its
<a class="reference internal" href="../ref/inf/dragon.infrastructure.group_desc.html#module-dragon.infrastructure.group_desc" title="dragon.infrastructure.group_desc"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">GroupDescriptor</span></code></a>. A <a class="reference internal" href="../ref/inf/dragon.infrastructure.group_desc.html#module-dragon.infrastructure.group_desc" title="dragon.infrastructure.group_desc"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">GroupDescriptor</span></code></a>
is an object that holds all the information needed, such as the group id, <code class="code docutils literal notranslate"><span class="pre">g_uid</span></code>, a unique name for the group, the
state of the group, etc. These identifiers are provided by Global Services and serve to identify the Group by the
higher levels and APIs.</p>
<p>Members of a Group could be of the same type, such as a group of processes, or it could be a combination of different types of objects, such as a group of
processes, channels, pools, etc.. A structure like this is useful for cases we need to manage a set of resources collectively.
Actions like add resources to a group or remove resources from a group are provided. The user can also destroy the resources of a group as well as the
group/container itself.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">GSGroup</span></code> is used when we want to manage MPI jobs with Dragon.
TODO: provide a link to the MPI page.</p>
<p>Another example could be the case where there are MPI processes and multiprocessing processes as members of the group and we need to manage those collectively.</p>
<p>For now, we only support groups of processes.</p>
</section>
<section id="performance-costs">
<h2>Performance Costs<a class="headerlink" href="#performance-costs" title="Permalink to this heading"></a></h2>
<p>The <a class="reference internal" href="../ref/ref.html#api-reference"><span class="std std-ref">API Reference</span></a> for the Dragon Native API separates the calls
according to how life-cycle management of an object is controlled, either
managed or unmanaged. The managed and unmanaged APIs have different performance
costs. Typically users should leverage all of the productivity of the managed
interfaces, but they do come at the performance cost of interacting with
Dragon’s services. This means there is communication and namespace management
overheads for calls with “_managed_” in their signature. If a user chooses to
give up automatic life-cycle management and discoverability, they can avoid
these overheads with the unmanaged APIs. These users must then explicitly do
life-cycle operations, such as clean-up, and any communication needed for other
processes to get handles to the objects. Furthermore, users will not be able to
identify objects by <a class="reference internal" href="glossary.html#term-Object-UID"><span class="xref std std-term">unique IDs</span></a> or <a class="reference internal" href="glossary.html#term-Object-Name"><span class="xref std std-term">names</span></a>,
but only use <a class="reference internal" href="glossary.html#term-Serialized-Descriptor"><span class="xref std std-term">serialized descriptors</span></a>.</p>
</section>
<section id="policies">
<h2>Policies<a class="headerlink" href="#policies" title="Permalink to this heading"></a></h2>
<p>Much like policies may be applied to a job in a workload manager, such as Slurm,
policies can be applied to objects in the Dragon resource model. Policies
control many aspects of the run-time and its objects, but for now we are focusing
on concepts like affinity to the caller and power consumption versus performance
controls. For instance, programmers can control how a process waits for activity
on an object. One or more policies can be created and applied across any/all
objects in the Dragon HPC Resource model. Objects can be customized, however,
at time of creation to override policy specifications.</p>
<p>For more information see the
<a class="reference internal" href="../ref/native/C/control_structures.html#control-structures-in-c"><span class="std std-ref">API reference on policies</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="running_dragon.html" class="btn btn-neutral float-left" title="Running Dragon" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="glossary.html" class="btn btn-neutral float-right" title="Glossary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>