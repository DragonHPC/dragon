<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="480px" preserveAspectRatio="none" style="width:1573px;height:480px;background:#FFFFFF;" version="1.1" viewBox="0 0 1573 480" width="1573px" zoomAndPan="magnify"><defs/><g><!--MD5=[8fe4c9ddcd48a804b928934a9fa2e0cc]
cluster Shepherd--><polygon fill="#FFFFFF" points="16,59,99,59,106,81.2969,1262,81.2969,1262,369,16,369,16,59" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="106" y1="81.2969" y2="81.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="77" x="20" y="73.9951">Shepherd</text><!--MD5=[a485118598bdbfabc652628e0d00a692]
cluster AIO--><polygon fill="#FFFFFF" points="338,110,413,110,420,132.2969,1230,132.2969,1230,271,338,271,338,110" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="338" x2="420" y1="132.2969" y2="132.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="69" x="342" y="124.9951">Async IO</text><!--MD5=[1035515eb14b5228f153ae78bdf69e99]
entity PM--><rect fill="#F8F8F8" height="46.2969" style="stroke:#383838;stroke-width:1.5;" width="160" x="151" y="177"/><rect fill="#F8F8F8" height="10" style="stroke:#383838;stroke-width:1.5;" width="15" x="291" y="182"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="289" y="184"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="289" y="188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="166" y="209.9951">Process Manager</text><!--MD5=[8ad42e69c823d91e931492f14bc2a1bb]
entity S--><rect fill="#F8F8F8" height="46.2969" style="stroke:#383838;stroke-width:1.5;" width="84" x="32" y="177"/><rect fill="#F8F8F8" height="10" style="stroke:#383838;stroke-width:1.5;" width="15" x="96" y="182"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="94" y="184"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="94" y="188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="47" y="209.9951">Server</text><!--MD5=[97bd77d21e825075296558c0a0501074]
entity asyncio_api--><ellipse cx="333" cy="324" fill="#F8F8F8" rx="8" ry="8" style="stroke:#383838;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="273.5" y="353.9951">AsyncIO Interface</text><!--MD5=[08857a8b92bdbbf97dbf926d52c5d5b8]
entity pman_api--><ellipse cx="138" cy="324" fill="#F8F8F8" rx="8" ry="8" style="stroke:#383838;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="65.5" y="353.9951">Process Manager API</text><!--MD5=[21c4f067ea39b24444517ddbeba0b8e4]
entity RT--><rect fill="#F8F8F8" height="46.2969" style="stroke:#383838;stroke-width:1.5;" width="140" x="558" y="177"/><rect fill="#F8F8F8" height="10" style="stroke:#383838;stroke-width:1.5;" width="15" x="678" y="182"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="676" y="184"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="676" y="188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="573" y="209.9951">Receive Tasks</text><!--MD5=[28b617f45f8b852b803088f4fea1b95e]
entity PT--><rect fill="#F8F8F8" height="46.2969" style="stroke:#383838;stroke-width:1.5;" width="141" x="381.5" y="177"/><rect fill="#F8F8F8" height="10" style="stroke:#383838;stroke-width:1.5;" width="15" x="502.5" y="182"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="500.5" y="184"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="500.5" y="188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="396.5" y="209.9951">Process Tasks</text><!--MD5=[ee98016af9295ffbf738bd95dbf16648]
entity SOT--><rect fill="#F8F8F8" height="46.2969" style="stroke:#383838;stroke-width:1.5;" width="131" x="1050.5" y="177"/><rect fill="#F8F8F8" height="10" style="stroke:#383838;stroke-width:1.5;" width="15" x="1161.5" y="182"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="1159.5" y="184"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="1159.5" y="188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1065.5" y="209.9951">Stdout Tasks</text><!--MD5=[b65e7c144e2ce3bdc7ab281d7a0403b1]
entity SET--><rect fill="#F8F8F8" height="46.2969" style="stroke:#383838;stroke-width:1.5;" width="127" x="888.5" y="177"/><rect fill="#F8F8F8" height="10" style="stroke:#383838;stroke-width:1.5;" width="15" x="995.5" y="182"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="993.5" y="184"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="993.5" y="188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="903.5" y="209.9951">Stderr Tasks</text><!--MD5=[d7de113dd230494941b9dd209f5133da]
entity SIT--><rect fill="#F8F8F8" height="46.2969" style="stroke:#383838;stroke-width:1.5;" width="120" x="733" y="177"/><rect fill="#F8F8F8" height="10" style="stroke:#383838;stroke-width:1.5;" width="15" x="833" y="182"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="831" y="184"/><rect fill="#F8F8F8" height="2" style="stroke:#383838;stroke-width:1.5;" width="4" x="831" y="188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="748" y="209.9951">Stdin Tasks</text><!--MD5=[f04879b9272762f5f3b2d7c87a4d4ca5]
entity shepherd_messages--><ellipse cx="1366" cy="324" fill="#F8F8F8" rx="8" ry="8" style="stroke:#383838;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="1286" y="353.9951">Shepherd Message API</text><!--MD5=[499de7f6f09343446a6a98bc27597418]
entity user_program_stdout--><ellipse cx="1140" cy="14" fill="#F8F8F8" rx="8" ry="8" style="stroke:#383838;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="1068" y="43.9951">User Program Stdout</text><!--MD5=[f75da3b7301bfd7d96c79a66ed6a4c8d]
entity user_program_stdin--><ellipse cx="770" cy="14" fill="#F8F8F8" rx="8" ry="8" style="stroke:#383838;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="703.5" y="43.9951">User Program Stdin</text><!--MD5=[ec661ac6c29f7dc847e428c0044aae62]
entity user_program_stderr--><ellipse cx="952" cy="14" fill="#F8F8F8" rx="8" ry="8" style="stroke:#383838;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="886.5" y="43.9951">User Program Sterr</text><!--MD5=[b68f029506d007bb301cc433903a77f0]
entity posix_message_queue--><ellipse cx="1299" cy="14" fill="#F8F8F8" rx="8" ry="8" style="stroke:#383838;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="1263" y="43.9951">POSIX MQ</text><!--MD5=[f4c2c6b1ce83135da143416fcde9e7c2]
entity global_services_channel--><ellipse cx="1476" cy="14" fill="#F8F8F8" rx="8" ry="8" style="stroke:#383838;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="1386" y="43.9951">Global Services Messages</text><!--MD5=[3c3284b76fb30cfe9397c2ed04a25403]
entity channel_api--><ellipse cx="1366" cy="442" fill="#F8F8F8" rx="8" ry="8" style="stroke:#383838;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1325" y="471.9951">Channel API</text><!--MD5=[b5b78671c917aba79f185eb634b5bc32]
reverse link RT to shepherd_messages--><path d="M654.71,226.81 C680.93,252.14 717,287 717,287 C717,287 1262,295 1262,295 C1262,295 1331.32,313.66 1356.77,320.52 " fill="none" id="RT-backto-shepherd_messages" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="650.92,223.15,654.6221,232.2766,654.5192,226.6207,660.1751,226.5178,650.92,223.15" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[4c320ffeda897318b7a5992c57f56a75]
link user_program_stdout to SOT--><path d="M1138.91,23.38 C1135.51,49.39 1125.06,129.51 1119.53,171.96 " fill="none" id="user_program_stdout-to-SOT" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="1118.88,176.94,1124.0042,168.5292,1119.523,171.9815,1116.0707,167.5003,1118.88,176.94" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[b75c3beb1e70ca60205dc9d526f28261]
link user_program_stderr to SET--><path d="M952,23.38 C952,49.34 952,129.18 952,171.7 " fill="none" id="user_program_stderr-to-SET" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="952,176.94,956,167.94,952,171.94,948,167.94,952,176.94" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[4de137abe9d03254981d00359c2e7daa]
reverse link user_program_stdin to SIT--><path d="M771.72,28.72 C775.67,60.34 785.44,138.5 790.24,176.94 " fill="none" id="user_program_stdin-backto-SIT" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="771.05,23.38,768.1872,32.8036,771.6649,28.342,776.1264,31.8198,771.05,23.38" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[993ac5ff0e998bf130bf6d200640d4db]
link AIO to asyncio_api--><path d="M342.7324,271.2706 C342.7262,271.4018 342.7202,271.5325 342.7141,271.6626 C342.702,271.9228 342.69,272.1807 342.6781,272.4361 C342.6543,272.947 342.631,273.4481 342.6081,273.9389 C342.2425,281.7919 342,287 342,287 C342,287 338.92,299.34 336.36,309.57 " fill="none" id="AIO-asyncio_api" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="335.09,314.65,341.1319,306.8721,336.2892,309.7959,333.3654,304.9533,335.09,314.65" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="342.7324,271.2706,338.3181,280.0748,342.4998,276.2652,346.3095,280.4469,342.7324,271.2706" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[adfeb67a24f76f5682a70bee50ce2817]
link PM to asyncio_api--><path d="M249.47,223.09 C271.02,248.86 305.86,290.54 322.92,310.95 " fill="none" id="PM-to-asyncio_api" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="326.29,314.97,323.5666,305.5052,323.075,311.1406,317.4396,310.6491,326.29,314.97" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[f2867eda5388a50bdfe15ed1d0883dc9]
reverse link PM to pman_api--><path d="M211.11,227.09 C189.89,254.93 157.51,297.41 144.12,314.97 " fill="none" id="PM-backto-pman_api" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="214.16,223.09,205.5218,227.821,211.1281,227.0658,211.8832,232.6721,214.16,223.09" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[6c70475c9f28fd390a8b39c42634af0e]
link S to pman_api--><path d="M85.59,223.09 C99,248.65 120.6,289.84 131.41,310.43 " fill="none" id="S-to-pman_api" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="133.79,314.97,133.1667,305.1409,131.4742,310.5386,126.0765,308.8461,133.79,314.97" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[b027ed11d4042179c0552bb92adce7c8]
reverse link shepherd_messages to channel_api--><path d="M1366,338.36 C1366,362.54 1366,412.91 1366,432.73 " fill="none" id="shepherd_messages-backto-channel_api" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="1366,333.34,1362,342.34,1366,338.34,1370,342.34,1366,333.34" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[7def1ed9d6ca3a954aa4bca993c21c48]
@startuml

skinparam componentStyle uml2
skinparam shadowing false
skinparam monochrome true
skinparam linetype polyline

package "Shepherd" {

    [Process Manager] as PM
    [Server] as S

    package "Async IO"  as AIO {

        [Receive Tasks] as RT
        [Process Tasks] as PT
        together {
            [Stdout Tasks] as SOT
            [Stderr Tasks] as SET
            [Stdin Tasks] as SIT
        }
    }

    interface "AsyncIO Interface" as asyncio_api
    interface "Process Manager API" as pman_api
    
}

interface "Shepherd Message API" as  shepherd_messages

interface  "User Program Stdout" as user_program_stdout
interface  "User Program Stdin" as user_program_stdin
interface  "User Program Sterr" as user_program_stderr

interface  "POSIX MQ " as posix_message_queue

interface "Global Services Messages" as global_services_channel
interface "Channel API" as channel_api

RT <- - shepherd_messages
SOT <-u- user_program_stdout
SET <-u- user_program_stderr
SIT -u-> user_program_stdin
AIO <- -> asyncio_api

PM - -> asyncio_api
PM <- - pman_api
S - -> pman_api

channel_api -u-> shepherd_messages

@enduml

PlantUML version 1.2022.1(Tue Feb 01 18:19:58 GMT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>