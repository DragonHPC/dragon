<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Managed Memory &mdash; Dragon  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Heap Manager" href="heapmanager.html" />
    <link rel="prev" title="Low-level Components" href="../components.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Dragon
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uguide/uguide.html">Users Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pguide/pguide.html">Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cbook/cbook.html">Solution Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../benchmarks/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ref/ref.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infrastructure/infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/services.html">Services</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../components.html">Low-level Components</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Managed Memory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#architecture">Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="heapmanager.html">Heap Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="bitset.html">BitSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="hexdump.html">Hex Dump</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cython-adapters">Cython Adapters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cy_heapmanager.html"><code class="code docutils literal notranslate"><span class="pre">dragon.heapmanager</span></code> – Heap allocations through the Heap Manager library</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cy_managedmemory.html"><code class="code docutils literal notranslate"><span class="pre">dragon.managed_memory</span></code> – Managed Memory Cython Adapter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unordered_map.html">Unordered Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../broadcast.html">Broadcast Component</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Dragon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../components.html">Low-level Components</a></li>
      <li class="breadcrumb-item active">Managed Memory</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/components/managed_memory/managed_memory.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="managed-memory">
<span id="managedmemory"></span><h1>Managed Memory<a class="headerlink" href="#managed-memory" title="Permalink to this heading"></a></h1>
<p>Memory managed by the Dragon runtime/services consists of memory pools and allocations within those pools.
Pools are managed by <a class="reference internal" href="../../services/local_services.html#localservices"><span class="std std-ref">Local Services</span></a> and can be backed by shared memory or a filesystem.  Pools can also
be entirely private to a process, but that type of memory cannot be used for inter-process communication.
Memory pools have many attributes that describe the type, how the memory is managed, and various other tuning
options.  Memory allocations from that pool then have the properties of the pool.</p>
<p>Memory pools also have the ability to grow based on demand. If they grow and how they grow is all defined by
the attributes of the pool.  All of the state for a memory pool and allocations within the pool is directly
encoded into the memory (as opposed to being tracked in a given process’s memory).  This design allows for
further enhancements for fault tolerance, relocation of pools and allocations, and potential for concurrency
in operations.  All operations on the state are guarded by Dragon Locks.  Because of this, the API is
completely thread safe.</p>
<p>Another attribute for Dragon managed memory is that handles to allocations and pools come through descriptors.
These descriptors can be serialized and communicated to another process.  The receiving process can
immediately used the reconstructed objects.  Interactions with remote memory must involve another process that
can directly access the memory.  In the Dragon context this will often be the Shepherd.  Other services and
libraries directly interact with managed memory and pools.  Channels, for example, requires Dragon managed
memory.</p>
<p>Finally, there are many ways to misuse the memory API.  Using a pointer after the associated memory has been
released back to the pool, for example, is permitted with undefined results.  It is on the user to ensure the
safety of operating on memory that can be directly addressed and potentially released by other processes.</p>
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this heading"></a></h2>
<figure class="align-default" id="id1">
<img alt="../../_images/managed_memory.svg" src="../../_images/managed_memory.svg" /><figcaption>
<p><span class="caption-number">Fig. 44 </span><span class="caption-text"><strong>Figure 1: Architecture of the Managed Memory component</strong></span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>MISSING Description of Request Handler and Pools</strong></p>
<p>Allocations from managed memory pools is implemented using a custom buddy allocator, or <a class="reference internal" href="heapmanager.html#heapmanager"><span class="std std-ref">Heap Manager</span></a>.
This custom allocator partitions a segment of memory and hands out portions of the memory through an
“allocation”.  Dragon managed memory uses a hierarchy of heap managers to implement allocations.  Bitset and
hexdump are support utilities for the heap manager.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="heapmanager.html">Heap Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="bitset.html">BitSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="hexdump.html">Hex Dump</a></li>
</ul>
</div>
</section>
<section id="cython-adapters">
<h2>Cython Adapters<a class="headerlink" href="#cython-adapters" title="Permalink to this heading"></a></h2>
<p>We provide Cython adapters to the <a class="reference internal" href="heapmanager.html#heapmanager"><span class="std std-ref">Heap Manager</span></a> and <a class="reference internal" href="#managedmemory"><span class="std std-ref">Managed Memory</span></a>:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="cy_heapmanager.html"><code class="code docutils literal notranslate"><span class="pre">dragon.heapmanager</span></code> – Heap allocations through the Heap Manager library</a></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../components.html" class="btn btn-neutral float-left" title="Low-level Components" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="heapmanager.html" class="btn btn-neutral float-right" title="Heap Manager" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>