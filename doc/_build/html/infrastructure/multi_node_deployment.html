<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Multi Node Deployment &mdash; Dragon  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Infrastructure Bootstrapping" href="bootstrapping.html" />
    <link rel="prev" title="Single Node Deployment" href="single_node_deployment.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Dragon
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uguide/uguide.html">Users Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pguide/pguide.html">Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cbook/cbook.html">Solution Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/ref.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="infrastructure.html">Infrastructure</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Infrastructure Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="messages_api.html">Infrastructure Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="processes.html">Process Creation and Interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="conventional_ids.html">Conventional IDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="single_node_deployment.html">Single Node Deployment</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Multi Node Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#multi-node-bringup">Multi Node Bringup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#network-configuration">Network Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#launching">Launching</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sequence-diagram">Sequence diagram</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#multi-node-teardown">Multi Node Teardown</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Sequence diagram</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bootstrapping.html">Infrastructure Bootstrapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../services/services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components/components.html">Low-level Components</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Dragon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="infrastructure.html">Infrastructure</a></li>
      <li class="breadcrumb-item active">Multi Node Deployment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/infrastructure/multi_node_deployment.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="multi-node-deployment">
<span id="multinodedeployment"></span><h1>Multi Node Deployment<a class="headerlink" href="#multi-node-deployment" title="Permalink to this heading"></a></h1>
<p>This section outlines multi-node bringup and teardown procedure for multi-node
systems.</p>
<p>Multi node launches start from a frontend node that the user is assumed to have a
command prompt on. This frontend can be co-located with backend nodes
or run from its own node. All off-node communication that is initiated by the
<a class="reference internal" href="../services/local_services.html#localservices"><span class="std std-ref">Local Services</span></a> goes through <a class="reference internal" href="../services/global_services.html#globalservices"><span class="std std-ref">Global Services</span></a>. Local
Services itself has a one-node view of the world while Global Services does the
work of communicating off node when necessary. Figures 1 and 2 depict a
multi-node version of the Dragon <a class="reference internal" href="../services/services.html#services"><span class="std std-ref">Services</span></a>.</p>
<figure class="align-default" id="id4">
<img alt="../_images/deployment_multi_node.svg" src="../_images/deployment_multi_node.svg" /><figcaption>
<p><span class="caption-number">Fig. 28 </span><span class="caption-text"><strong>Figure 1: Startup Overview</strong></span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id5">
<a class="reference internal image-reference" href="infrastructure/images/multinodeoverview.png"><img alt="infrastructure/images/multinodeoverview.png" src="infrastructure/images/multinodeoverview.png" /></a>
<figcaption>
<p><span class="caption-number">Fig. 29 </span><span class="caption-text"><strong>Figure 2: Multi-Node Overview of Dragon Services</strong></span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="multi-node-bringup">
<span id="multinodebringup"></span><h2>Multi Node Bringup<a class="headerlink" href="#multi-node-bringup" title="Permalink to this heading"></a></h2>
<section id="network-configuration">
<span id="networkconfiguration"></span><h3>Network Configuration<a class="headerlink" href="#network-configuration" title="Permalink to this heading"></a></h3>
<p>The launcher frontend must know what resources are available for its use on the
compute backend. To obtain that information for a given set of workload
managers, there is a network config tool in the launcher module. This tool is
exposed for general use. However, if deploying dragon on a supported workload
manager with an active job allocation, the launcher frontend will handle
obtaining the network configuration. It exists in <code class="code docutils literal notranslate"><span class="pre">dragon.launcher.network_config.main</span></code>,
but can be invoked directly via <code class="code docutils literal notranslate"><span class="pre">dragon-network-config</span></code>. Its help is below:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-number">Listing 28 </span><span class="caption-text"><strong>Dragon Network Config (dragon-network-config) tool’s help and basic use</strong></span><a class="headerlink" href="#id6" title="Permalink to this code"></a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>usage: dragon-network-config [-h] [-p PORT] [--network-prefix NETWORK_PREFIX] [--wlm WORKLOAD_MANAGER] [--log] [--output-to-yaml] [--output-to-json]
                             [--no-stdout] [--primary PRIMARY] [--hostlist HOSTLIST | --hostfile HOSTFILE]

Runs Dragon internal tool for generating network topology

optional arguments:
  -h, --help            show this help message and exit
  -p PORT, --port PORT  Infrastructure listening port (default: 6565)
  --network-prefix NETWORK_PREFIX
                        NETWORK_PREFIX specifies the network prefix the dragon runtime will use to determine which IP addresses it should use to build
                        multinode connections from. By default the regular expression r&#39;^(hsn|ipogif|ib)\d+$&#39; is used -- the prefix for known HPE-Cray XC
                        and EX high speed networks. If uncertain which networks are available, the following will return them in pretty formatting: `dragon-
                        network-ifaddrs --ip --no-loopback --up --running | jq`. Prepending with `srun` may be necessary to get networks available on
                        backend compute nodes
  --wlm WORKLOAD_MANAGER, -w WORKLOAD_MANAGER
                        Specify what workload manager is used. Currently supported WLMs are: slurm, pbs+pals, ssh
  --log, -l             Enable debug logging
  --output-to-yaml, -y  Output configuration to YAML file
  --output-to-json, -j  Output configuration to JSON file
  --no-stdout           Do not print the configuration to stdout
  --primary PRIMARY     Specify the hostname to be used for the primary compute node
  --hostlist HOSTLIST   Specify backend hostnames as a comma-separated list, eg: `--hostlist host_1,host_2,host_3`. `--hostfile` or `--hostlist` is a
                        required argument for WLM SSH and is only used for SSH
  --hostfile HOSTFILE   Specify a list of hostnames to connect to via SSH launch. The file should be a newline character separated list of hostnames.
                        `--hostfile` or `--hostlist` is a required argument for WLM SSH and is only used for SSH

# To create YAML and JSON files with a slurm WLM:
$ dragon-network-config --wlm slurm --output-to-yaml --output-to-json
</pre></div>
</div>
</div>
<p>If output to file (YAML or JSON are supported), the file can be provided to the
launcher frontend at launch. Formatting of the files appears below:</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-number">Listing 29 </span><span class="caption-text"><strong>Example of YAML formatted network configuration file</strong></span><a class="headerlink" href="#id7" title="Permalink to this code"></a></div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="s">&#39;0&#39;</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">h_uid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">host_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">18446744071562724608</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">  </span><span class="nt">ip_addrs</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.128.0.5:6565</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">  </span><span class="nt">is_primary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nid00004</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">  </span><span class="nt">num_cpus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">  </span><span class="nt">physical_mem</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="linenos">10</span><span class="w">  </span><span class="nt">shep_cd</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="linenos">11</span><span class="w">  </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span><span class="w"></span>
<span class="linenos">12</span><span class="s">&#39;1&#39;</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="linenos">13</span><span class="w">  </span><span class="nt">h_uid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class="w"></span>
<span class="linenos">14</span><span class="w">  </span><span class="nt">host_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">18446744071562724864</span><span class="w"></span>
<span class="linenos">15</span><span class="w">  </span><span class="nt">ip_addrs</span><span class="p">:</span><span class="w"></span>
<span class="linenos">16</span><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.128.0.6:6565</span><span class="w"></span>
<span class="linenos">17</span><span class="w">  </span><span class="nt">is_primary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos">18</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nid00005</span><span class="w"></span>
<span class="linenos">19</span><span class="w">  </span><span class="nt">num_cpus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="linenos">20</span><span class="w">  </span><span class="nt">physical_mem</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="linenos">21</span><span class="w">  </span><span class="nt">shep_cd</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="linenos">22</span><span class="w">  </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-number">Listing 30 </span><span class="caption-text"><strong>Example of JSON formatted network configuration file</strong></span><a class="headerlink" href="#id8" title="Permalink to this code"></a></div>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">        </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">        </span><span class="nt">&quot;h_uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nid00004&quot;</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">        </span><span class="nt">&quot;is_primary&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">        </span><span class="nt">&quot;ip_addrs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">            </span><span class="s2">&quot;10.128.0.5:6565&quot;</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">        </span><span class="p">],</span><span class="w"></span>
<span class="linenos">10</span><span class="w">        </span><span class="nt">&quot;host_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">18446744071562724608</span><span class="p">,</span><span class="w"></span>
<span class="linenos">11</span><span class="w">        </span><span class="nt">&quot;num_cpus&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="linenos">12</span><span class="w">        </span><span class="nt">&quot;physical_mem&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="linenos">13</span><span class="w">        </span><span class="nt">&quot;shep_cd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="linenos">14</span><span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="linenos">15</span><span class="w">    </span><span class="nt">&quot;1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">16</span><span class="w">        </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"></span>
<span class="linenos">17</span><span class="w">        </span><span class="nt">&quot;h_uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<span class="linenos">18</span><span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nid00005&quot;</span><span class="p">,</span><span class="w"></span>
<span class="linenos">19</span><span class="w">        </span><span class="nt">&quot;is_primary&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="linenos">20</span><span class="w">        </span><span class="nt">&quot;ip_addrs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="linenos">21</span><span class="w">            </span><span class="s2">&quot;10.128.0.6:6565&quot;</span><span class="w"></span>
<span class="linenos">22</span><span class="w">        </span><span class="p">],</span><span class="w"></span>
<span class="linenos">23</span><span class="w">        </span><span class="nt">&quot;host_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">18446744071562724864</span><span class="p">,</span><span class="w"></span>
<span class="linenos">24</span><span class="w">        </span><span class="nt">&quot;num_cpus&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="linenos">25</span><span class="w">        </span><span class="nt">&quot;physical_mem&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="linenos">26</span><span class="w">        </span><span class="nt">&quot;shep_cd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"></span>
<span class="linenos">27</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">28</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</section>
<section id="launching">
<h3>Launching<a class="headerlink" href="#launching" title="Permalink to this heading"></a></h3>
<p>The <a class="reference internal" href="../services/local_services.html#localservices"><span class="std std-ref">Local Services</span></a> and <a class="reference internal" href="../services/global_services.html#globalservices"><span class="std std-ref">Global Services</span></a> are instantiated when a
program is launched by the Dragon <a class="reference internal" href="../services/launcher.html#launcher"><span class="std std-ref">Launcher</span></a>. There is one Local Services
instance on each node and one Global Services instance in the entire job.
Since all <a class="reference internal" href="../services/services.html#services"><span class="std std-ref">Services</span></a> run as user-level services (i.e. not with superuser
authority), the services described here are assumed to be one per launched user
program.</p>
<p>The multi-node bring-up sequence is given in figure 3 and in the section titled
<a class="reference internal" href="#multinodebringup"><span class="std std-ref">Multi Node Bringup</span></a> where the message descriptions are also provided. The
Launcher Frontend brings up an instance of the Launcher Backend on each node.
Each launcher (frontend and backend) then brings up an instance of the TCP
Transport Agent which serves to create an Overlay Tree for communicating
infrastructure-related messages.</p>
<p>The Launcher Backend then brings up Local Services. The Backend
forwards messages from the Launcher Frontend to Local Services. Local Services forwards
output from the user program to the Frontend through the Backend.</p>
</section>
<section id="sequence-diagram">
<h3>Sequence diagram<a class="headerlink" href="#sequence-diagram" title="Permalink to this heading"></a></h3>
<p>Figure 3 depicts the message flow in the multi-node startup sequence.</p>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" preserveAspectRatio="none" version="1.1" viewBox="0 0 1615 2455" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="2351.0781" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="153.5" y="46.2969"/><line style="stroke:#000000;stroke-width:1.0;" x1="153.5" x2="153.5" y1="46.2969" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="163.5" x2="163.5" y1="46.2969" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="153.5" x2="163.5" y1="46.2969" y2="46.2969"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="153.5" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="153.5" x2="153.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="163.5" x2="163.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="153.5" x2="163.5" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="131.6641" style="stroke:#000000;stroke-width:1.0;" width="10" x="307.5" y="46.2969"/><rect fill="#FFFFFF" height="2116.8828" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="472.5" y="280.4922"/><line style="stroke:#000000;stroke-width:1.0;" x1="472.5" x2="472.5" y1="280.4922" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="482.5" x2="482.5" y1="280.4922" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="472.5" x2="482.5" y1="280.4922" y2="280.4922"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="472.5" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="472.5" x2="472.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="482.5" x2="482.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="472.5" x2="482.5" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="2010.3516" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="637.5" y="387.0234"/><line style="stroke:#000000;stroke-width:1.0;" x1="637.5" x2="637.5" y1="387.0234" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="647.5" x2="647.5" y1="387.0234" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="637.5" x2="647.5" y1="387.0234" y2="387.0234"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="637.5" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="637.5" x2="637.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="647.5" x2="647.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="637.5" x2="647.5" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="1905.6563" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="877" y="491.7188"/><line style="stroke:#000000;stroke-width:1.0;" x1="877" x2="877" y1="491.7188" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="887" x2="887" y1="491.7188" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="877" x2="887" y1="491.7188" y2="491.7188"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="877" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="877" x2="877" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="887" x2="887" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="877" x2="887" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="1662.3281" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1023" y="735.0469"/><line style="stroke:#000000;stroke-width:1.0;" x1="1023" x2="1023" y1="735.0469" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1033" x2="1033" y1="735.0469" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1023" x2="1033" y1="735.0469" y2="735.0469"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1023" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1023" x2="1023" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1033" x2="1033" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1023" x2="1033" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="1204.8047" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1233" y="1192.5703"/><line style="stroke:#000000;stroke-width:1.0;" x1="1233" x2="1233" y1="1192.5703" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1243" x2="1243" y1="1192.5703" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1233" x2="1243" y1="1192.5703" y2="1192.5703"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1233" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1233" x2="1233" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1243" x2="1243" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1233" x2="1243" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="902.0781" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1365.5" y="1495.2969"/><line style="stroke:#000000;stroke-width:1.0;" x1="1365.5" x2="1365.5" y1="1495.2969" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1375.5" x2="1375.5" y1="1495.2969" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1365.5" x2="1375.5" y1="1495.2969" y2="1495.2969"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1365.5" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1365.5" x2="1365.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1375.5" x2="1375.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1365.5" x2="1375.5" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="209.2266" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1508.5" y="2188.1484"/><line style="stroke:#000000;stroke-width:1.0;" x1="1508.5" x2="1508.5" y1="2188.1484" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1518.5" x2="1518.5" y1="2188.1484" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1508.5" x2="1518.5" y1="2188.1484" y2="2188.1484"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1508.5" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1508.5" x2="1508.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1518.5" x2="1518.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1508.5" x2="1518.5" y1="2439.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="158" x2="158" y1="36.2969" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="158" x2="158" y1="2397.375" y2="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="158" x2="158" y1="2438.1797" y2="2448.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="312" x2="312" y1="36.2969" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="312" x2="312" y1="2397.375" y2="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="312" x2="312" y1="2438.1797" y2="2448.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="477" x2="477" y1="258.793" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="477" x2="477" y1="2397.375" y2="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="477" x2="477" y1="2438.1797" y2="2448.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="642" x2="642" y1="386.5391" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="642" x2="642" y1="2397.375" y2="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="642" x2="642" y1="2438.1797" y2="2448.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="881.5" x2="881.5" y1="470.0195" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="881.5" x2="881.5" y1="2397.375" y2="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="881.5" x2="881.5" y1="2438.1797" y2="2448.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1027.5" x2="1027.5" y1="720.9141" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1027.5" x2="1027.5" y1="2397.375" y2="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1027.5" x2="1027.5" y1="2438.1797" y2="2448.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1238" x2="1238" y1="1178.4375" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1238" x2="1238" y1="2397.375" y2="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1238" x2="1238" y1="2438.1797" y2="2448.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1370" x2="1370" y1="1481.1641" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1370" x2="1370" y1="2397.375" y2="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1370" x2="1370" y1="2438.1797" y2="2448.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1513" x2="1513" y1="2187.6641" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1513" x2="1513" y1="2397.375" y2="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1513" x2="1513" y1="2438.1797" y2="2448.1797"/><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="145" x="86" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="93" y="24.9951">Launcher Frontend</text><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="143" x="241" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="248" y="24.9951">Compute Backend</text><rect fill="#FFFFFF" height="2351.0781" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="153.5" y="46.2969"/><line style="stroke:#000000;stroke-width:1.0;" x1="153.5" x2="153.5" y1="46.2969" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="163.5" x2="163.5" y1="46.2969" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="153.5" x2="163.5" y1="46.2969" y2="46.2969"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="153.5" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="153.5" x2="153.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="163.5" x2="163.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="153.5" x2="163.5" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="131.6641" style="stroke:#000000;stroke-width:1.0;" width="10" x="307.5" y="46.2969"/><rect fill="#FFFFFF" height="2116.8828" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="472.5" y="280.4922"/><line style="stroke:#000000;stroke-width:1.0;" x1="472.5" x2="472.5" y1="280.4922" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="482.5" x2="482.5" y1="280.4922" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="472.5" x2="482.5" y1="280.4922" y2="280.4922"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="472.5" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="472.5" x2="472.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="482.5" x2="482.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="472.5" x2="482.5" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="2010.3516" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="637.5" y="387.0234"/><line style="stroke:#000000;stroke-width:1.0;" x1="637.5" x2="637.5" y1="387.0234" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="647.5" x2="647.5" y1="387.0234" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="637.5" x2="647.5" y1="387.0234" y2="387.0234"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="637.5" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="637.5" x2="637.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="647.5" x2="647.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="637.5" x2="647.5" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="1905.6563" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="877" y="491.7188"/><line style="stroke:#000000;stroke-width:1.0;" x1="877" x2="877" y1="491.7188" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="887" x2="887" y1="491.7188" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="877" x2="887" y1="491.7188" y2="491.7188"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="877" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="877" x2="877" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="887" x2="887" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="877" x2="887" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="1662.3281" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1023" y="735.0469"/><line style="stroke:#000000;stroke-width:1.0;" x1="1023" x2="1023" y1="735.0469" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1033" x2="1033" y1="735.0469" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1023" x2="1033" y1="735.0469" y2="735.0469"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1023" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1023" x2="1023" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1033" x2="1033" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1023" x2="1033" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="1204.8047" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1233" y="1192.5703"/><line style="stroke:#000000;stroke-width:1.0;" x1="1233" x2="1233" y1="1192.5703" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1243" x2="1243" y1="1192.5703" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1233" x2="1243" y1="1192.5703" y2="1192.5703"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1233" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1233" x2="1233" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1243" x2="1243" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1233" x2="1243" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="902.0781" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1365.5" y="1495.2969"/><line style="stroke:#000000;stroke-width:1.0;" x1="1365.5" x2="1365.5" y1="1495.2969" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1375.5" x2="1375.5" y1="1495.2969" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1365.5" x2="1375.5" y1="1495.2969" y2="1495.2969"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1365.5" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1365.5" x2="1365.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1375.5" x2="1375.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1365.5" x2="1375.5" y1="2439.1797" y2="2439.1797"/><rect fill="#FFFFFF" height="209.2266" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1508.5" y="2188.1484"/><line style="stroke:#000000;stroke-width:1.0;" x1="1508.5" x2="1508.5" y1="2188.1484" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1518.5" x2="1518.5" y1="2188.1484" y2="2397.375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1508.5" x2="1518.5" y1="2188.1484" y2="2188.1484"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="1508.5" y="2438.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1508.5" x2="1508.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1518.5" x2="1518.5" y1="2438.1797" y2="2439.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1508.5" x2="1518.5" y1="2439.1797" y2="2439.1797"/><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="220" x="48" y="51.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="52" y="67.3638">[A1]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="87" y="67.3638"/><a href="#launch-net-config" target="_top" title="optional if user has already done this and supplied via YAML" xlink:actuate="onRequest" xlink:href="#launch-net-config" xlink:show="new" xlink:title="optional if user has already done this and supplied via YAML" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="177" x="87" y="67.3638">launch network configurator</text></a><polygon fill="#000000" points="295.5,96.5625,305.5,100.5625,295.5,104.5625" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="163.5" x2="301.5" y1="100.5625" y2="100.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="170.5" y="95.4966">[M1]</text><a href="#wlm-launch" target="_top" title="#wlm-launch" xlink:actuate="onRequest" xlink:href="#wlm-launch" xlink:show="new" xlink:title="#wlm-launch" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="75" x="208.5" y="95.4966">WLM launch</text></a><rect fill="#98FB98" height="38" style="stroke:#000000;stroke-width:1.0;" width="196" x="214" y="113.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="218" y="129.6294">[A2]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="253" y="129.6294">line buffer JSON network</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="218" y="144.7622">config to stdout</text><polygon fill="#000000" points="174.5,173.9609,164.5,177.9609,174.5,181.9609" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="168.5" x2="311.5" y1="177.9609" y2="177.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="244.5" y="172.895">[M2]</text><a href="#wlm-launch" target="_top" title="#wlm-launch" xlink:actuate="onRequest" xlink:href="#wlm-launch" xlink:show="new" xlink:title="#wlm-launch" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="23" x="282.5" y="172.895">Exit</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="226" x="45" y="190.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="49" y="207.0278">[A3]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="84" y="207.0278"/><a href="#launch-frontend-overlay" target="_top" title="Popen as a child proc. Could be thread in future" xlink:actuate="onRequest" xlink:href="#launch-frontend-overlay" xlink:show="new" xlink:title="Popen as a child proc. Could be thread in future" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="183" x="84" y="207.0278">OS-spawn overlay TCP agent</text></a><polygon fill="#000000" points="382,266.4922,392,270.4922,382,274.4922" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="163.5" x2="388" y1="270.4922" y2="270.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="170.5" y="250.2935">[M3]</text><a href="#overlay-init" target="_top" title="#overlay-init" xlink:actuate="onRequest" xlink:href="#overlay-init" xlink:show="new" xlink:title="#overlay-init" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="19" x="208.5" y="235.1606">CLI</text></a><a href="#overlay-init" target="_top" title="#overlay-init" xlink:actuate="onRequest" xlink:href="#overlay-init" xlink:show="new" xlink:title="#overlay-init" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="92" x="208.5" y="250.2935">network config</text></a><a href="#overlay-init" target="_top" title="#overlay-init" xlink:actuate="onRequest" xlink:href="#overlay-init" xlink:show="new" xlink:title="#overlay-init" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="65" x="208.5" y="265.4263">&amp; CTRL ch</text></a><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="167" x="394" y="237.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="401" y="257.1904">TCP Overlay Front End</text><polygon fill="#000000" points="174.5,310.7578,164.5,314.7578,174.5,318.7578" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="168.5" x2="471.5" y1="314.7578" y2="314.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="336.5" y="302.1255">[M4]</text><a href="../infrastructure/messages_api.html#overlaypingla" target="_top" title="../infrastructure/messages_api.html#overlaypingla" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#overlaypingla" xlink:show="new" xlink:title="../infrastructure/messages_api.html#overlaypingla" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="50" x="374.5" y="294.5591">CTRL ch</text></a><a href="../infrastructure/messages_api.html#overlaypingla" target="_top" title="../infrastructure/messages_api.html#overlaypingla" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#overlaypingla" xlink:show="new" xlink:title="../infrastructure/messages_api.html#overlaypingla" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="91" x="374.5" y="309.6919">OverlayPingLA</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="143" x="87" y="327.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="91" y="343.8247">[A4]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="126" y="343.8247"/><a href="#launch-backend" target="_top" title="one instance per compute node" xlink:actuate="onRequest" xlink:href="#launch-backend" xlink:show="new" xlink:title="one instance per compute node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="100" x="126" y="343.8247">launch backend</text></a><polygon fill="#000000" points="559,373.0234,569,377.0234,559,381.0234" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="163.5" x2="565" y1="377.0234" y2="377.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="170.5" y="371.9575">[M5]</text><a href="#wlm-launch" target="_top" title="#wlm-launch" xlink:actuate="onRequest" xlink:href="#wlm-launch" xlink:show="new" xlink:title="#wlm-launch" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="75" x="208.5" y="371.9575">WLM launch</text></a><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="143" x="571" y="355.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="578" y="375.8857">Launcher Backend</text><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="226" x="529" y="402.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="533" y="418.2544">[A5]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="568" y="418.2544"/><a href="#start-transport" target="_top" title="#start-transport" xlink:actuate="onRequest" xlink:href="#start-transport" xlink:show="new" xlink:title="#start-transport" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="183" x="568" y="418.2544">OS-spawn overlay TCP agent</text></a><polygon fill="#000000" points="789.5,477.7188,799.5,481.7188,789.5,485.7188" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="647.5" x2="795.5" y1="481.7188" y2="481.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="654.5" y="461.52">[M6]</text><a href="#overlay-init" target="_top" title="#overlay-init" xlink:actuate="onRequest" xlink:href="#overlay-init" xlink:show="new" xlink:title="#overlay-init" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="19" x="692.5" y="446.3872">CLI</text></a><a href="#overlay-init" target="_top" title="#overlay-init" xlink:actuate="onRequest" xlink:href="#overlay-init" xlink:show="new" xlink:title="#overlay-init" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="92" x="692.5" y="461.52">network config</text></a><a href="#overlay-init" target="_top" title="#overlay-init" xlink:actuate="onRequest" xlink:href="#overlay-init" xlink:show="new" xlink:title="#overlay-init" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="65" x="692.5" y="476.6528">&amp; CTRL ch</text></a><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="161" x="801.5" y="448.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="808.5" y="468.417">TCP Overlay Backend</text><polygon fill="#000000" points="658.5,521.9844,648.5,525.9844,658.5,529.9844" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="652.5" x2="876" y1="525.9844" y2="525.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="740" y="513.3521">[M7]</text><a href="../infrastructure/messages_api.html#overlaypingbe" target="_top" title="../infrastructure/messages_api.html#overlaypingbe" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#overlaypingbe" xlink:show="new" xlink:title="../infrastructure/messages_api.html#overlaypingbe" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="50" x="778" y="505.7856">CTRL ch</text></a><a href="../infrastructure/messages_api.html#overlaypingbe" target="_top" title="../infrastructure/messages_api.html#overlaypingbe" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#overlaypingbe" xlink:show="new" xlink:title="../infrastructure/messages_api.html#overlaypingbe" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="92" x="778" y="520.9185">OverlayPingBE</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="223" x="531" y="538.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="535" y="555.0513">[A6]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="570" y="555.0513">connect to frontend channel</text><polygon fill="#000000" points="174.5,599.3828,164.5,603.3828,174.5,607.3828" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="168.5" x2="636.5" y1="603.3828" y2="603.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="547.5" y="590.7505">[M8]</text><a href="../infrastructure/messages_api.html#beisup" target="_top" title="../infrastructure/messages_api.html#beisup" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#beisup" xlink:show="new" xlink:title="../infrastructure/messages_api.html#beisup" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="585.5" y="583.1841">LA ch</text></a><a href="../infrastructure/messages_api.html#beisup" target="_top" title="../infrastructure/messages_api.html#beisup" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#beisup" xlink:show="new" xlink:title="../infrastructure/messages_api.html#beisup" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="45" x="585.5" y="598.3169">BEIsUp</text></a><polygon fill="#000000" points="625.5,643.6484,635.5,647.6484,625.5,651.6484" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="163.5" x2="631.5" y1="647.6484" y2="647.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="170.5" y="635.0161">[M9]</text><a href="#give-node-id" target="_top" title="communicated over Channels using Overlay Network" xlink:actuate="onRequest" xlink:href="#give-node-id" xlink:show="new" xlink:title="communicated over Channels using Overlay Network" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="208.5" y="627.4497">BE ch</text></a><a href="#give-node-id" target="_top" title="communicated over Channels using Overlay Network" xlink:actuate="onRequest" xlink:href="#give-node-id" xlink:show="new" xlink:title="communicated over Channels using Overlay Network" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="84" x="208.5" y="642.5825">FENodeIdxBE</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="195" x="545" y="660.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="549" y="676.7153">[A7]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="584" y="676.7153"/><a href="#start-local-services" target="_top" title="#start-local-services" xlink:actuate="onRequest" xlink:href="#start-local-services" xlink:show="new" xlink:title="#start-local-services" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="152" x="584" y="676.7153">OS spawn local services</text></a><polygon fill="#000000" points="960.5,721.0469,970.5,725.0469,960.5,729.0469" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="647.5" x2="966.5" y1="725.0469" y2="725.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="654.5" y="712.4146">[M10]</text><a href="../infrastructure/messages_api.html#benodeidxsh" target="_top" title="../infrastructure/messages_api.html#benodeidxsh" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#benodeidxsh" xlink:show="new" xlink:title="../infrastructure/messages_api.html#benodeidxsh" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="31" x="701.5" y="704.8481">stdin</text></a><a href="../infrastructure/messages_api.html#benodeidxsh" target="_top" title="../infrastructure/messages_api.html#benodeidxsh" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#benodeidxsh" xlink:show="new" xlink:title="../infrastructure/messages_api.html#benodeidxsh" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="88" x="701.5" y="719.981">BENodeIdxSH</text></a><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="111" x="972.5" y="691.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="979.5" y="711.7451">Local Services</text><rect fill="#98FB98" height="38" style="stroke:#000000;stroke-width:1.0;" width="189" x="933" y="738.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="937" y="754.1138">[A8]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="972" y="754.1138">make shared memory</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="937" y="769.2466">segments and channels</text><polygon fill="#000000" points="658.5,813.5781,648.5,817.5781,658.5,821.5781" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="652.5" x2="1022" y1="817.5781" y2="817.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="906" y="804.9458">[M11]</text><a href="../infrastructure/messages_api.html#shpingbe" target="_top" title="../infrastructure/messages_api.html#shpingbe" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shpingbe" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shpingbe" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="41" x="953" y="797.3794">stdout</text></a><a href="../infrastructure/messages_api.html#shpingbe" target="_top" title="../infrastructure/messages_api.html#shpingbe" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shpingbe" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shpingbe" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="63" x="953" y="812.5122">SHPingBE</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="175" x="555" y="830.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="559" y="846.645">[A9]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="594" y="846.645">attach to LS channel</text><polygon fill="#000000" points="1011,890.9766,1021,894.9766,1011,898.9766" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="647.5" x2="1017" y1="894.9766" y2="894.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="654.5" y="882.3442">[M12]</text><a href="../infrastructure/messages_api.html#bepingsh" target="_top" title="../infrastructure/messages_api.html#bepingsh" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#bepingsh" xlink:show="new" xlink:title="../infrastructure/messages_api.html#bepingsh" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="701.5" y="874.7778">LS ch</text></a><a href="../infrastructure/messages_api.html#bepingsh" target="_top" title="../infrastructure/messages_api.html#bepingsh" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#bepingsh" xlink:show="new" xlink:title="../infrastructure/messages_api.html#bepingsh" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="63" x="701.5" y="889.9106">BEPingSH</text></a><polygon fill="#000000" points="658.5,935.2422,648.5,939.2422,658.5,943.2422" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="652.5" x2="1022" y1="939.2422" y2="939.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="873" y="926.6099">[M13]</text><a href="../infrastructure/messages_api.html#shchannelsup" target="_top" title="../infrastructure/messages_api.html#shchannelsup" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shchannelsup" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shchannelsup" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="920" y="919.0435">BE ch</text></a><a href="../infrastructure/messages_api.html#shchannelsup" target="_top" title="../infrastructure/messages_api.html#shchannelsup" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shchannelsup" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shchannelsup" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="96" x="920" y="934.1763">SHChannelsUp</text></a><polygon fill="#000000" points="174.5,979.5078,164.5,983.5078,174.5,987.5078" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="168.5" x2="636.5" y1="983.5078" y2="983.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="462.5" y="970.8755">[M14]</text><a href="#many-to-one" target="_top" title="#many-to-one" xlink:actuate="onRequest" xlink:href="#many-to-one" xlink:show="new" xlink:title="#many-to-one" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="509.5" y="963.3091">LA ch</text></a><a href="#many-to-one" target="_top" title="#many-to-one" xlink:actuate="onRequest" xlink:href="#many-to-one" xlink:show="new" xlink:title="#many-to-one" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="121" x="509.5" y="978.4419">SHChannelsUp #N</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="176" x="70" y="996.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="74" y="1012.5747">[A10]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="118" y="1012.5747"/><a href="#transmit-lachannelsinfo" target="_top" title="#transmit-lachannelsinfo" xlink:actuate="onRequest" xlink:href="#transmit-lachannelsinfo" xlink:show="new" xlink:title="#transmit-lachannelsinfo" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="124" x="118" y="1012.5747">gather channels-up</text></a><polygon fill="#000000" points="625.5,1056.9063,635.5,1060.9063,625.5,1064.9063" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="163.5" x2="631.5" y1="1060.9063" y2="1060.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="170.5" y="1048.2739">[M15]</text><a href="#one-to-many" target="_top" title="#one-to-many" xlink:actuate="onRequest" xlink:href="#one-to-many" xlink:show="new" xlink:title="#one-to-many" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="217.5" y="1040.7075">BE ch</text></a><a href="#one-to-many" target="_top" title="#one-to-many" xlink:actuate="onRequest" xlink:href="#one-to-many" xlink:show="new" xlink:title="#one-to-many" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="123" x="217.5" y="1055.8403">LAChannelsInfo #N</text></a><polygon fill="#000000" points="1011,1101.1719,1021,1105.1719,1011,1109.1719" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="647.5" x2="1017" y1="1105.1719" y2="1105.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="654.5" y="1092.5396">[M16]</text><a href="../infrastructure/messages_api.html#lachannelsinfo" target="_top" title="../infrastructure/messages_api.html#lachannelsinfo" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#lachannelsinfo" xlink:show="new" xlink:title="../infrastructure/messages_api.html#lachannelsinfo" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="701.5" y="1084.9731">LS ch</text></a><a href="../infrastructure/messages_api.html#lachannelsinfo" target="_top" title="../infrastructure/messages_api.html#lachannelsinfo" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#lachannelsinfo" xlink:show="new" xlink:title="../infrastructure/messages_api.html#lachannelsinfo" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="98" x="701.5" y="1100.106">LAChannelsInfo</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="219" x="918" y="1118.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="922" y="1134.2388">[A11]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="966" y="1134.2388"/><a href="#start-transport" target="_top" title="#start-transport" xlink:actuate="onRequest" xlink:href="#start-transport" xlink:show="new" xlink:title="#start-transport" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="167" x="966" y="1134.2388">OS spawn transport agent</text></a><polygon fill="#000000" points="1163,1178.5703,1173,1182.5703,1163,1186.5703" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1033" x2="1169" y1="1182.5703" y2="1182.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1040" y="1169.938">[M17]</text><a href="#transport-cli" target="_top" title="#transport-cli" xlink:actuate="onRequest" xlink:href="#transport-cli" xlink:show="new" xlink:title="#transport-cli" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="53" x="1087" y="1162.3716">CLI+env</text></a><a href="#transport-cli" target="_top" title="#transport-cli" xlink:actuate="onRequest" xlink:href="#transport-cli" xlink:show="new" xlink:title="#transport-cli" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="71" x="1087" y="1177.5044">TA,GW chs.</text></a><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="126" x="1175" y="1149.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1182" y="1169.2686">Transport Agent</text><polygon fill="#000000" points="1221,1222.8359,1231,1226.8359,1221,1230.8359" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1033" x2="1227" y1="1226.8359" y2="1226.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1040" y="1214.2036">[M18]</text><a href="../infrastructure/messages_api.html#lachannelsinfo" target="_top" title="../infrastructure/messages_api.html#lachannelsinfo" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#lachannelsinfo" xlink:show="new" xlink:title="../infrastructure/messages_api.html#lachannelsinfo" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="1087" y="1206.6372">TA ch</text></a><a href="../infrastructure/messages_api.html#lachannelsinfo" target="_top" title="../infrastructure/messages_api.html#lachannelsinfo" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#lachannelsinfo" xlink:show="new" xlink:title="../infrastructure/messages_api.html#lachannelsinfo" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="98" x="1087" y="1221.77">LAChannelsInfo</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="127" x="1174" y="1239.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="1178" y="1255.9028">[A12]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="1222" y="1255.9028">notify LS up</text><polygon fill="#000000" points="1044,1300.2344,1034,1304.2344,1044,1308.2344" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1038" x2="1232" y1="1304.2344" y2="1304.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1117" y="1291.6021">[M19]</text><a href="../infrastructure/messages_api.html#lachannelsinfo" target="_top" title="../infrastructure/messages_api.html#lachannelsinfo" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#lachannelsinfo" xlink:show="new" xlink:title="../infrastructure/messages_api.html#lachannelsinfo" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="1164" y="1284.0356">LS ch</text></a><a href="../infrastructure/messages_api.html#lachannelsinfo" target="_top" title="../infrastructure/messages_api.html#lachannelsinfo" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#lachannelsinfo" xlink:show="new" xlink:title="../infrastructure/messages_api.html#lachannelsinfo" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="62" x="1164" y="1299.1685">TAPingSH</text></a><polygon fill="#000000" points="658.5,1344.5,648.5,1348.5,658.5,1352.5" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="652.5" x2="1022" y1="1348.5" y2="1348.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="933" y="1335.8677">[M20]</text><a href="../infrastructure/messages_api.html#taup" target="_top" title="../infrastructure/messages_api.html#taup" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#taup" xlink:show="new" xlink:title="../infrastructure/messages_api.html#taup" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="980" y="1328.3013">BE ch</text></a><a href="../infrastructure/messages_api.html#taup" target="_top" title="../infrastructure/messages_api.html#taup" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#taup" xlink:show="new" xlink:title="../infrastructure/messages_api.html#taup" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="34" x="980" y="1343.4341">TAUp</text></a><polygon fill="#000000" points="174.5,1388.7656,164.5,1392.7656,174.5,1396.7656" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="168.5" x2="636.5" y1="1392.7656" y2="1392.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="488.5" y="1380.1333">[M21]</text><a href="#many-to-one" target="_top" title="#many-to-one" xlink:actuate="onRequest" xlink:href="#many-to-one" xlink:show="new" xlink:title="#many-to-one" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="535.5" y="1372.5669">LA ch</text></a><a href="#many-to-one" target="_top" title="#many-to-one" xlink:actuate="onRequest" xlink:href="#many-to-one" xlink:show="new" xlink:title="#many-to-one" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="95" x="535.5" y="1387.6997">TAUp node #N</text></a><rect fill="#98FB98" height="38" style="stroke:#000000;stroke-width:1.0;" width="213" x="921" y="1405.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="925" y="1421.8325">[A13]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="969" y="1421.8325"/><a href="#start-global-services" target="_top" title="#start-global-services" xlink:actuate="onRequest" xlink:href="#start-global-services" xlink:show="new" xlink:title="#start-global-services" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="161" x="969" y="1421.8325">OS spawn global services</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="929" y="1436.9653">on primary node</text><polygon fill="#000000" points="1299,1481.2969,1309,1485.2969,1299,1489.2969" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1033" x2="1305" y1="1485.2969" y2="1485.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1040" y="1472.6646">[M22]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="1087" y="1465.0981">stdin</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="1087" y="1480.231">LAChannelsInfo</text><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="119" x="1311" y="1452"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1318" y="1471.9951">Global Services</text><rect fill="#98FB98" height="38" style="stroke:#000000;stroke-width:1.0;" width="171" x="1285" y="1498.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="1289" y="1514.3638">[A14]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="1333" y="1514.3638">attach to channels</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="1289" y="1529.4966">[A15]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="1333" y="1529.4966">ping all LS</text><polygon fill="#000000" points="1044,1573.8281,1034,1577.8281,1044,1581.8281" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1038" x2="1364.5" y1="1577.8281" y2="1577.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1246.5" y="1565.1958">[M23]</text><a href="../infrastructure/messages_api.html#gspingsh" target="_top" title="../infrastructure/messages_api.html#gspingsh" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gspingsh" xlink:show="new" xlink:title="../infrastructure/messages_api.html#gspingsh" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="1293.5" y="1557.6294">LS ch</text></a><a href="../infrastructure/messages_api.html#gspingsh" target="_top" title="../infrastructure/messages_api.html#gspingsh" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gspingsh" xlink:show="new" xlink:title="../infrastructure/messages_api.html#gspingsh" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="65" x="1293.5" y="1572.7622">GSPingSH</text></a><polygon fill="#000000" points="1353.5,1618.0938,1363.5,1622.0938,1353.5,1626.0938" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1033" x2="1359.5" y1="1622.0938" y2="1622.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1040" y="1609.4614">[M24]</text><a href="../infrastructure/messages_api.html#shpinggs" target="_top" title="every LS pings back to GS" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shpinggs" xlink:show="new" xlink:title="every LS pings back to GS" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="38" x="1087" y="1601.895">GS ch</text></a><a href="../infrastructure/messages_api.html#shpinggs" target="_top" title="every LS pings back to GS" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shpinggs" xlink:show="new" xlink:title="every LS pings back to GS" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="90" x="1087" y="1617.0278">SHPingGS #N</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="161" x="1290" y="1635.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="1294" y="1651.1606">[A16]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="1338" y="1651.1606">notify runtime up</text><polygon fill="#000000" points="658.5,1695.4922,648.5,1699.4922,658.5,1703.4922" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="652.5" x2="1364.5" y1="1699.4922" y2="1699.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1234.5" y="1686.8599">[M25]</text><a href="../infrastructure/messages_api.html#gsisup" target="_top" title="only primary sends this" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsisup" xlink:show="new" xlink:title="only primary sends this" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="77" x="1281.5" y="1679.2935">prime BE ch</text></a><a href="../infrastructure/messages_api.html#gsisup" target="_top" title="only primary sends this" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsisup" xlink:show="new" xlink:title="only primary sends this" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="47" x="1281.5" y="1694.4263">GSIsUp</text></a><polygon fill="#000000" points="174.5,1739.7578,164.5,1743.7578,174.5,1747.7578" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="168.5" x2="636.5" y1="1743.7578" y2="1743.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="507.5" y="1731.1255">[M26]</text><a href="../infrastructure/messages_api.html#gsisup" target="_top" title="only primary sends this" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsisup" xlink:show="new" xlink:title="only primary sends this" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="76" x="554.5" y="1723.5591">prime LA ch</text></a><a href="../infrastructure/messages_api.html#gsisup" target="_top" title="only primary sends this" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsisup" xlink:show="new" xlink:title="only primary sends this" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="47" x="554.5" y="1738.6919">GSIsUp</text></a><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1608" x="0" y="1772.3242"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1608" y1="1772.3242" y2="1772.3242"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1608" y1="1775.3242" y2="1775.3242"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="180" x="714" y="1761.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="161" x="720" y="1777.8247">Dragon Runtime is up</text><rect fill="#98FB98" height="38" style="stroke:#000000;stroke-width:1.0;" width="162" x="77" y="1799.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="81" y="1815.9575">[A17]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="125" y="1815.9575"/><a href="#start-user-program" target="_top" title="#start-user-program" xlink:actuate="onRequest" xlink:href="#start-user-program" xlink:show="new" xlink:title="#start-user-program" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="110" x="125" y="1815.9575">launch head proc</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="81" y="1831.0903">python3 my.py parms</text><polygon fill="#000000" points="625.5,1875.4219,635.5,1879.4219,625.5,1883.4219" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="163.5" x2="631.5" y1="1879.4219" y2="1879.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="170.5" y="1866.7896">[M27]</text><a href="../infrastructure/messages_api.html#gsprocesscreate" target="_top" title="only primary node receives this" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsprocesscreate" xlink:show="new" xlink:title="only primary node receives this" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="77" x="217.5" y="1859.2231">prime BE ch</text></a><a href="../infrastructure/messages_api.html#gsprocesscreate" target="_top" title="only primary node receives this" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsprocesscreate" xlink:show="new" xlink:title="only primary node receives this" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="204" x="217.5" y="1874.356">GSProcessCreate my.py, parms</text></a><polygon fill="#000000" points="1353.5,1919.6875,1363.5,1923.6875,1353.5,1927.6875" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="647.5" x2="1359.5" y1="1923.6875" y2="1923.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="654.5" y="1911.0552">[M28]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="701.5" y="1903.4888">prime GS ch</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="701.5" y="1918.6216">GSProcessCreate my.py, parms</text><polygon fill="#000000" points="658.5,1963.9531,648.5,1967.9531,658.5,1971.9531" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="652.5" x2="1364.5" y1="1967.9531" y2="1967.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1137.5" y="1955.3208">[M29]</text><a href="../infrastructure/messages_api.html#gsprocesscreateresponse" target="_top" title="../infrastructure/messages_api.html#gsprocesscreateresponse" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsprocesscreateresponse" xlink:show="new" xlink:title="../infrastructure/messages_api.html#gsprocesscreateresponse" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="77" x="1184.5" y="1947.7544">prime BE ch</text></a><a href="../infrastructure/messages_api.html#gsprocesscreateresponse" target="_top" title="../infrastructure/messages_api.html#gsprocesscreateresponse" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsprocesscreateresponse" xlink:show="new" xlink:title="../infrastructure/messages_api.html#gsprocesscreateresponse" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="174" x="1184.5" y="1962.8872">GSProcessCreateResponse</text></a><rect fill="#98FB98" height="38" style="stroke:#000000;stroke-width:1.0;" width="191" x="1275" y="1980.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="1279" y="1997.02">[A18]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="1323" y="1997.02">register head process</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="1279" y="2012.1528">[A19]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="1323" y="2012.1528">start on selected LS</text><polygon fill="#000000" points="174.5,2056.4844,164.5,2060.4844,174.5,2064.4844" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="168.5" x2="636.5" y1="2060.4844" y2="2060.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="409.5" y="2047.8521">[M30]</text><a href="../infrastructure/messages_api.html#gsprocesscreateresponse" target="_top" title="only sent to primary node" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsprocesscreateresponse" xlink:show="new" xlink:title="only sent to primary node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="76" x="456.5" y="2040.2856">prime LA ch</text></a><a href="../infrastructure/messages_api.html#gsprocesscreateresponse" target="_top" title="only sent to primary node" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsprocesscreateresponse" xlink:show="new" xlink:title="only sent to primary node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="174" x="456.5" y="2055.4185">GSProcessCreateResponse</text></a><polygon fill="#000000" points="1044,2100.75,1034,2104.75,1044,2108.75" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1038" x2="1364.5" y1="2104.75" y2="2104.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1107.5" y="2092.1177">[M31]</text><a href="../infrastructure/messages_api.html#shprocesscreate" target="_top" title="only selected head LS receives this" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shprocesscreate" xlink:show="new" xlink:title="only selected head LS receives this" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="1154.5" y="2084.5513">LS ch</text></a><a href="../infrastructure/messages_api.html#shprocesscreate" target="_top" title="only selected head LS receives this" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shprocesscreate" xlink:show="new" xlink:title="only selected head LS receives this" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="204" x="1154.5" y="2099.6841">SHProcessCreate my.py, parms</text></a><polygon fill="#000000" points="1353.5,2145.0156,1363.5,2149.0156,1353.5,2153.0156" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1033" x2="1359.5" y1="2149.0156" y2="2149.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1040" y="2136.3833">[M32]</text><a href="../infrastructure/messages_api.html#shprocesscreateresponse" target="_top" title="../infrastructure/messages_api.html#shprocesscreateresponse" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shprocesscreateresponse" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shprocesscreateresponse" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="38" x="1087" y="2128.8169">GS ch</text></a><a href="../infrastructure/messages_api.html#shprocesscreateresponse" target="_top" title="../infrastructure/messages_api.html#shprocesscreateresponse" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shprocesscreateresponse" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shprocesscreateresponse" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="174" x="1087" y="2143.9497">SHProcessCreateResponse</text></a><polygon fill="#000000" points="1428,2174.1484,1438,2178.1484,1428,2182.1484" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1033" x2="1434" y1="2178.1484" y2="2178.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1040" y="2173.0825">[M33]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1087" y="2173.0825">spawn my.py process</text><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="147" x="1440" y="2157.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="1447" y="2177.0107">User Program Entry</text><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="180" x="1423" y="2203.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="1427" y="2219.3794">[A20]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1471" y="2219.3794"/><a href="#route-stdout" target="_top" title="#route-stdout" xlink:actuate="onRequest" xlink:href="#route-stdout" xlink:show="new" xlink:title="#route-stdout" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="128" x="1471" y="2219.3794">example: print('foo')</text></a><polygon fill="#000000" points="1044,2263.7109,1034,2267.7109,1044,2271.7109" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1038" x2="1507.5" y1="2267.7109" y2="2267.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="1413.5" y="2255.0786">[M34]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="1460.5" y="2247.5122">stdout</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="1475.5" y="2262.645">'foo'</text><polygon fill="#000000" points="658.5,2307.9766,648.5,2311.9766,658.5,2315.9766" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="652.5" x2="1022" y1="2311.9766" y2="2311.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="852" y="2299.3442">[M35]</text><a href="../infrastructure/messages_api.html#shfwdoutput" target="_top" title="../infrastructure/messages_api.html#shfwdoutput" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shfwdoutput" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shfwdoutput" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="899" y="2291.7778">BE ch</text></a><a href="../infrastructure/messages_api.html#shfwdoutput" target="_top" title="../infrastructure/messages_api.html#shfwdoutput" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shfwdoutput" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shfwdoutput" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="117" x="899" y="2306.9106">SHFwdOutput 'foo'</text></a><polygon fill="#000000" points="174.5,2352.2422,164.5,2356.2422,174.5,2360.2422" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="168.5" x2="636.5" y1="2356.2422" y2="2356.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="466.5" y="2343.6099">[M36]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="595.5" y="2336.0435">LA ch</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="513.5" y="2351.1763">SHFwdOutput 'foo'</text><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="308" x="5" y="2369.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="9" y="2385.3091">[A21]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="53" y="2385.3091">print `SHFwdOutput` contents to stdout</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="125" x="773.5" y="2421.5854">Main output continues</text><!--MD5=[275a1463663cde8f3f30bc5ab730f8b5]
@startuml
skinparam style strictuml

' Make sure the SVG scales in the rst correctly
skinparam svgDimensionStyle false

' Style crap
skinparam sequenceMessageAlign direction
skinparam LifelineStrategy nosolid
skinparam ParticipantBackgroundColor Khaki
skinparam NoteBackgroundColor PaleGreen
skinparam ParticipantBorderColor Black
skinparam NoteBorderColor Black
skinparam ArrowColor Black
skinparam SequenceLifeLineBorderColor Black

participant "Launcher Frontend" as LA
participant "Compute Backend" as CE
participant "TCP Overlay Front End" as OF
participant "Launcher Backend" as BE
participant "TCP Overlay Backend" as OB
participant "Local Services" as LS
participant "Transport Agent" as TA
participant "Global Services" as GS
participant "User Program Entry" as UP

autonumber "<b>[M0]"

' function to keep track of action numbering
!global $action_count = 0
!function $action()
!global $action_count = $action_count + 1
!return "<b>[A" + $action_count + "]</b>"
!endfunction

' Do network config
activate LA
activate CE
rnote over LA: $action() [[#launch-net-config {optional if user has already done this and supplied via YAML} launch network configurator]]
LA->CE: [[#wlm-launch WLM launch]]
rnote over CE: $action() line buffer JSON network\nconfig to stdout
LA<-CE: [[#wlm-launch Exit]]
deactivate CE

' Start overlay on frontend
create OF
rnote over LA: $action() [[#launch-frontend-overlay {Popen as a child proc. Could be thread in future} OS-spawn overlay TCP agent]]
LA->OF: [[#overlay-init CLI\nnetwork config\n& CTRL ch]]
activate OF
LA<-OF: [[../infrastructure/messages_api.html#overlaypingla CTRL ch\nOverlayPingLA]]

' Start backend
create BE
rnote over LA: $action() [[#launch-backend {one instance per compute node} launch backend]]
LA->BE: [[#wlm-launch WLM launch]]
activate BE
create OB
rnote over BE: $action() [[#start-transport OS-spawn overlay TCP agent]]
BE->OB: [[#overlay-init CLI\nnetwork config\n& CTRL ch]]
activate OB
OB->BE: [[../infrastructure/messages_api.html#overlaypingbe CTRL ch\nOverlayPingBE]]
rnote over BE: $action() connect to frontend channel
LA<-BE: [[../infrastructure/messages_api.html#beisup LA ch\nBEIsUp]]
LA->BE: [[#give-node-id {communicated over Channels using Overlay Network} BE ch\nFENodeIdxBE]]

' Start local services
create LS
rnote over BE: $action() [[#start-local-services OS spawn local services]]
BE->LS: [[../infrastructure/messages_api.html#benodeidxsh stdin\nBENodeIdxSH]]
activate LS
rnote over LS: $action() make shared memory \nsegments and channels
BE<-LS: [[../infrastructure/messages_api.html#shpingbe stdout\nSHPingBE]]
rnote over BE: $action() attach to LS channel
BE->LS: [[../infrastructure/messages_api.html#bepingsh LS ch\nBEPingSH]]
BE<-LS: [[../infrastructure/messages_api.html#shchannelsup BE ch\nSHChannelsUp]]
LA<-BE: [[#many-to-one LA ch\nSHChannelsUp #N]]
rnote over LA: $action() [[#transmit-lachannelsinfo gather channels-up]]
LA->BE: [[#one-to-many BE ch\nLAChannelsInfo #N]]
BE->LS: [[../infrastructure/messages_api.html#lachannelsinfo LS ch\nLAChannelsInfo]]

' Start transport agent
create TA
rnote over LS: $action() [[#start-transport OS spawn transport agent]]
LS->TA: [[#transport-cli CLI+env\nTA,GW chs.]]
activate TA
LS->TA: [[../infrastructure/messages_api.html#lachannelsinfo TA ch\nLAChannelsInfo]]
rnote over TA: $action() notify LS up
LS<-TA: [[../infrastructure/messages_api.html#lachannelsinfo LS ch\nTAPingSH]]
BE<-LS: [[../infrastructure/messages_api.html#taup BE ch\nTAUp]]
LA<-BE: [[#many-to-one LA ch\nTAUp node #N]]

' Start Global Services
rnote over LS: $action() [[#start-global-services OS spawn global services]]\n on primary node
create GS
LS->GS: stdin\nLAChannelsInfo
activate GS
rnote over GS: $action() attach to channels\n$action() ping all LS
LS<-GS: [[../infrastructure/messages_api.html#gspingsh LS ch\nGSPingSH]]
LS->GS: [[../infrastructure/messages_api.html#shpinggs {every LS pings back to GS} GS ch\nSHPingGS #N]]
rnote over GS: $action() notify runtime up
BE<-GS: [[../infrastructure/messages_api.html#gsisup {only primary sends this} prime BE ch\nGSIsUp]]
LA<-BE: [[../infrastructure/messages_api.html#gsisup {only primary sends this} prime LA ch\nGSIsUp]]

== Dragon Runtime is up ==

' Start user process
rnote over LA: $action() [[#start-user-program launch head proc]]\npython3 my.py parms
LA->BE: [[../infrastructure/messages_api.html#gsprocesscreate {only primary node receives this} prime BE ch\nGSProcessCreate my.py, parms]]
BE->GS: prime GS ch\nGSProcessCreate my.py, parms
BE<-GS: [[../infrastructure/messages_api.html#gsprocesscreateresponse prime BE ch\nGSProcessCreateResponse]]
rnote over GS: $action() register head process\n$action() start on selected LS
BE->LA: [[../infrastructure/messages_api.html#gsprocesscreateresponse {only sent to primary node} prime LA ch\nGSProcessCreateResponse]]
LS<-GS: [[../infrastructure/messages_api.html#shprocesscreate {only selected head LS receives this} LS ch\nSHProcessCreate my.py, parms]]
LS->GS: [[../infrastructure/messages_api.html#shprocesscreateresponse GS ch\nSHProcessCreateResponse]]
create UP
LS->UP: spawn my.py process
activate UP
rnote over UP: $action() [[#route-stdout example: print('foo')]]
LS<-UP: stdout\n'foo'
BE<-LS: [[../infrastructure/messages_api.html#shfwdoutput BE ch\nSHFwdOutput 'foo']]
LA<-BE: LA ch\nSHFwdOutput 'foo'
rnote over LA: $action() print `SHFwdOutput` contents to stdout
... Main output continues ...
@enduml

@startuml
skinparam style strictuml

skinparam svgDimensionStyle false

skinparam sequenceMessageAlign direction
skinparam LifelineStrategy nosolid
skinparam ParticipantBackgroundColor Khaki
skinparam NoteBackgroundColor PaleGreen
skinparam ParticipantBorderColor Black
skinparam NoteBorderColor Black
skinparam ArrowColor Black
skinparam SequenceLifeLineBorderColor Black

participant "Launcher Frontend" as LA
participant "Compute Backend" as CE
participant "TCP Overlay Front End" as OF
participant "Launcher Backend" as BE
participant "TCP Overlay Backend" as OB
participant "Local Services" as LS
participant "Transport Agent" as TA
participant "Global Services" as GS
participant "User Program Entry" as UP

autonumber "<b>[M0]"


activate LA
activate CE
rnote over LA: <b>[A1]</b> [[#launch-net-config {optional if user has already done this and supplied via YAML} launch network configurator]]
LA->CE: [[#wlm-launch WLM launch]]
rnote over CE: <b>[A2]</b> line buffer JSON network\nconfig to stdout
LA<-CE: [[#wlm-launch Exit]]
deactivate CE

create OF
rnote over LA: <b>[A3]</b> [[#launch-frontend-overlay {Popen as a child proc. Could be thread in future} OS-spawn overlay TCP agent]]
LA->OF: [[#overlay-init CLI\nnetwork config\n& CTRL ch]]
activate OF
LA<-OF: [[../infrastructure/messages_api.html#overlaypingla CTRL ch\nOverlayPingLA]]

create BE
rnote over LA: <b>[A4]</b> [[#launch-backend {one instance per compute node} launch backend]]
LA->BE: [[#wlm-launch WLM launch]]
activate BE
create OB
rnote over BE: <b>[A5]</b> [[#start-transport OS-spawn overlay TCP agent]]
BE->OB: [[#overlay-init CLI\nnetwork config\n& CTRL ch]]
activate OB
OB->BE: [[../infrastructure/messages_api.html#overlaypingbe CTRL ch\nOverlayPingBE]]
rnote over BE: <b>[A6]</b> connect to frontend channel
LA<-BE: [[../infrastructure/messages_api.html#beisup LA ch\nBEIsUp]]
LA->BE: [[#give-node-id {communicated over Channels using Overlay Network} BE ch\nFENodeIdxBE]]

create LS
rnote over BE: <b>[A7]</b> [[#start-local-services OS spawn local services]]
BE->LS: [[../infrastructure/messages_api.html#benodeidxsh stdin\nBENodeIdxSH]]
activate LS
rnote over LS: <b>[A8]</b> make shared memory \nsegments and channels
BE<-LS: [[../infrastructure/messages_api.html#shpingbe stdout\nSHPingBE]]
rnote over BE: <b>[A9]</b> attach to LS channel
BE->LS: [[../infrastructure/messages_api.html#bepingsh LS ch\nBEPingSH]]
BE<-LS: [[../infrastructure/messages_api.html#shchannelsup BE ch\nSHChannelsUp]]
LA<-BE: [[#many-to-one LA ch\nSHChannelsUp #N]]
rnote over LA: <b>[A10]</b> [[#transmit-lachannelsinfo gather channels-up]]
LA->BE: [[#one-to-many BE ch\nLAChannelsInfo #N]]
BE->LS: [[../infrastructure/messages_api.html#lachannelsinfo LS ch\nLAChannelsInfo]]

create TA
rnote over LS: <b>[A11]</b> [[#start-transport OS spawn transport agent]]
LS->TA: [[#transport-cli CLI+env\nTA,GW chs.]]
activate TA
LS->TA: [[../infrastructure/messages_api.html#lachannelsinfo TA ch\nLAChannelsInfo]]
rnote over TA: <b>[A12]</b> notify LS up
LS<-TA: [[../infrastructure/messages_api.html#lachannelsinfo LS ch\nTAPingSH]]
BE<-LS: [[../infrastructure/messages_api.html#taup BE ch\nTAUp]]
LA<-BE: [[#many-to-one LA ch\nTAUp node #N]]

rnote over LS: <b>[A13]</b> [[#start-global-services OS spawn global services]]\n on primary node
create GS
LS->GS: stdin\nLAChannelsInfo
activate GS
rnote over GS: <b>[A14]</b> attach to channels\n<b>[A15]</b> ping all LS
LS<-GS: [[../infrastructure/messages_api.html#gspingsh LS ch\nGSPingSH]]
LS->GS: [[../infrastructure/messages_api.html#shpinggs {every LS pings back to GS} GS ch\nSHPingGS #N]]
rnote over GS: <b>[A16]</b> notify runtime up
BE<-GS: [[../infrastructure/messages_api.html#gsisup {only primary sends this} prime BE ch\nGSIsUp]]
LA<-BE: [[../infrastructure/messages_api.html#gsisup {only primary sends this} prime LA ch\nGSIsUp]]

== Dragon Runtime is up ==

rnote over LA: <b>[A17]</b> [[#start-user-program launch head proc]]\npython3 my.py parms
LA->BE: [[../infrastructure/messages_api.html#gsprocesscreate {only primary node receives this} prime BE ch\nGSProcessCreate my.py, parms]]
BE->GS: prime GS ch\nGSProcessCreate my.py, parms
BE<-GS: [[../infrastructure/messages_api.html#gsprocesscreateresponse prime BE ch\nGSProcessCreateResponse]]
rnote over GS: <b>[A18]</b> register head process\n<b>[A19]</b> start on selected LS
BE->LA: [[../infrastructure/messages_api.html#gsprocesscreateresponse {only sent to primary node} prime LA ch\nGSProcessCreateResponse]]
LS<-GS: [[../infrastructure/messages_api.html#shprocesscreate {only selected head LS receives this} LS ch\nSHProcessCreate my.py, parms]]
LS->GS: [[../infrastructure/messages_api.html#shprocesscreateresponse GS ch\nSHProcessCreateResponse]]
create UP
LS->UP: spawn my.py process
activate UP
rnote over UP: <b>[A20]</b> [[#route-stdout example: print('foo')]]
LS<-UP: stdout\n'foo'
BE<-LS: [[../infrastructure/messages_api.html#shfwdoutput BE ch\nSHFwdOutput 'foo']]
LA<-BE: LA ch\nSHFwdOutput 'foo'
rnote over LA: <b>[A21]</b> print `SHFwdOutput` contents to stdout
... Main output continues ...
@enduml

PlantUML version 1.2022.1(Tue Feb 01 18:19:58 GMT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg><p><strong>Figure 3: Sequence diagram of Dragon multi-node bringup</strong></p>
<section id="notes-on-bring-up-sequence">
<h4>Notes on Bring-up Sequence<a class="headerlink" href="#notes-on-bring-up-sequence" title="Permalink to this heading"></a></h4>
<dl id="launch-net-config">
<dt>Get Network Configuration (A1-A3)</dt><dd><p>Launch 1 instance of network config tool on each backend compute node.
Each instance will use other dragon tools to determine a preferred IP address
for frontend and its unique Host ID that will be used in routing
messages to and from it.</p>
<p>Each network config instance will line buffer the network information to stdout
as a serialized JSON structure. The frontend will consume this information.</p>
<p>The config tool will then exit.</p>
</dd>
</dl>
<dl id="wlm-launch">
<dt>Workload Manager Launch (Bring-up M1, M5 | Teardown M24)</dt><dd><p>Launch one instance of given script/executable on each backend. No CPU affinity
binding should be used (eg: <a href="#id1"><span class="problematic" id="id2">`</span></a>srun -n &lt;# nodes&gt; -N &lt;# nodes&gt; –cpu_bind=none python3 backend.py)</p>
<p>The exit code from the WLM should be monitored for errors.</p>
</dd>
</dl>
<dl id="launch-frontend-overlay">
<dt>Launch frontend overlay agent (A3-A4)</dt><dd><p>Launch TCP transport agent. Over command-line arguments, provide channels for communication to
and from the frontend (appears collectively as <code class="code docutils literal notranslate"><span class="pre">CTRL</span> <span class="pre">ch</span></code> in the sequence diagrams),
IP addresses of all backend compute nodes, and host IDs of all backend compute nodes.</p>
<p><strong>NOTE: The Frontend and Backend each manage their own memory pool independent of Local Services
specifically for managing the Channels necessary for Overlay Network communication</strong></p>
<p>In the environment, there will be environment variables set to tell the overlay network what
gateway channels it should monitor for remote messaging.</p>
<p>Once the agent is up, it sends a ping saying as much.</p>
</dd>
</dl>
<dl id="overlay-init">
<dt>Overlay input arguments (M3, M6):</dt><dd><span class="target" id="module-dragon.transport.overlay"></span><dl class="py function">
<dt class="sig sig-object py" id="dragon.transport.overlay.start_overlay_network">
<span class="sig-name descname"><span class="pre">start_overlay_network</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ch_in_sdesc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../ref/core/Cython/utils.html#id10" title="dragon.utils.B64"><span class="pre">B64</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ch_out_sdesc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../ref/core/Cython/utils.html#id10" title="dragon.utils.B64"><span class="pre">B64</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_sdesc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../ref/core/Cython/utils.html#id10" title="dragon.utils.B64"><span class="pre">B64</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frontend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dragon.transport.overlay.start_overlay_network" title="Permalink to this definition"></a></dt>
<dd><p>Entry point to start the launcher overlay network</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ch_in_sdesc</strong> (<a class="reference internal" href="../ref/core/Cython/utils.html#id10" title="dragon.utils.B64"><em>B64</em></a>) – Channel to be used for infrastructure messages incoming
from launcher frontend/backend. One component of “CTRL ch”</p></li>
<li><p><strong>ch_out_sdesc</strong> (<a class="reference internal" href="../ref/core/Cython/utils.html#id10" title="dragon.utils.B64"><em>B64</em></a>) – Channel to be used for infrastructure messages outgoing
to launcher frontend/backend. One component of “CTRL ch”</p></li>
<li><p><strong>log_sdesc</strong> (<a class="reference internal" href="../ref/core/Cython/utils.html#id10" title="dragon.utils.B64"><em>B64</em></a>) – Channel to be used for sending logging messages to the Frontend</p></li>
<li><p><strong>host_ids</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – List of host IDs for all nodes that will be communicated with</p></li>
<li><p><strong>ip_addrs</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – List of IP address for all nodes that will be communicated with</p></li>
<li><p><strong>frontend</strong> (<em>bool</em><em>, </em><em>optional</em>) – Is parent process the launcher frontned defaults to False</p></li>
<li><p><strong>env</strong> (<em>dict</em><em>, </em><em>optional</em>) – environment variables. Should container gateway channels, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Popen object for the overlay network process</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>subprocess.Popen</p>
</dd>
</dl>
</dd></dl>

</dd>
</dl>
<dl id="launch-backend">
<dt>Launch backend and its overlay network (A4-M8)</dt><dd><p>Use workload manager to launch 1 instance of backend on each compute node. In command line
arguments, provide a channel to communicate with frontend, the frontend’s IP address, and its
host ID.</p>
<p>The Backend will provide the frontend channel, IP, and host ID to start its own TCP overlay
agent as in <a class="reference internal" href="#launch-frontend-overlay"><span class="std std-ref">Launch frontend overlay agent (A3-A4)</span></a>. Using the provided information via the launch command and
its own locally obtained IP address and host ID, each backend instance will be able to communicate
directly with the single frontend instance and vice-versa.</p>
<p>Once backend and its overlay agent is up, it will send a <code class="code docutils literal notranslate"><span class="pre">BEIsUp</span></code> message to the frontend. The
frontend waits till it receives this message from every backend before continuing.</p>
</dd>
</dl>
<dl id="give-node-id">
<dt>Provide Node Index to each Backend instance (M9)</dt><dd><p>The Frontend will use host ID information in the <code class="code docutils literal notranslate"><span class="pre">BEIsUp</span></code> message to assign node indices.
The primary node is given node index 0 and can be specified by hostname via the user when
starting the Dragon runtime. The remaining values will be integers up to <code class="code docutils literal notranslate"><span class="pre">N-1</span></code>, where is <code class="code docutils literal notranslate"><span class="pre">N</span></code>
is the number of backend compute nodes.</p>
<p>The node index is given in <code class="code docutils literal notranslate"><span class="pre">FENodeIdxBE</span></code>. It travels from the frontend over the channel whose descriptor
was provided in the <code class="code docutils literal notranslate"><span class="pre">BEIsUp</span></code> by the backend.</p>
</dd>
</dl>
<dl id="start-local-services">
<dt>Start Local Services (A12-A15)</dt><dd><p>This is the most critical part of bring-up. If it is successful, everything else will likely be
fine.</p>
<p>Launcher Backend popens Local Services. Over <code class="code docutils literal notranslate"><span class="pre">stdin</span></code>, it provides <code class="code docutils literal notranslate"><span class="pre">BENodeIdxSH</span></code>. That messages
contains logging channel descriptor, hostname, primary node status (boolean), node index, and
IP address for backend communication <strong>This is a potentially different IP address than the one being
used for the overlay network. If it’s the same IP, it IS a different port, as it will be used by a
different transport agent for communication among other backend nodes, NOT the frontend.</strong></p>
<p><code class="code docutils literal notranslate"><span class="pre">SHPingBE</span></code> is returned to the backend over <code class="code docutils literal notranslate"><span class="pre">stdout</span></code>. This message contains the channel descriptors that
will be used for all future communication on the node.</p>
<p>The backend sends <code class="code docutils literal notranslate"><span class="pre">BEPingSH</span></code> to confirm channel comms are successful. <code class="code docutils literal notranslate"><span class="pre">SHChannelsUp</span></code> is returned by
Local Services. It contains channel descriptors for all service communication for its node,
including Global Services (for the primary node), which every other node will
use to communicate with the Global Services instance on the primary node. The Host ID is also
contained in <code class="code docutils literal notranslate"><span class="pre">SHChannelsUp</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="many-to-one">
<dt>Many-to-One SHChannelsUP, TAUp, TAHalted, SHHaltBE (Bring-up M14, M21 | Teardown M15, M19):</dt><dd><p>These messages are a gather operation from all the backend nodes to the frontend.
It represents a potential hang situation that requires care to eliminate the likelihood
of a hung bring-up sequence.</p>
</dd>
</dl>
<dl class="simple" id="one-to-many">
<dt>One-to-Many LAChannelsInfo, SHHaltTA,  (Bring-up M15 | Teardown M10, M16):</dt><dd><p>These messages and their communication (one-to-many Bcast) represents one of the biggest bottlenecks in
the bring-up sequence. For larger messages, the first step in reducing that cost is compressing. Next would
be to implement a tree Bcast.</p>
</dd>
</dl>
<dl id="transmit-lachannelsinfo">
<dt>Transmit LAChannelsInfo (A15-A16)</dt><dd><p>This is the most critical message. It contains all information necessary to make execution of
the Dragon runtime possible.</p>
<p>The Frontend receives one <code class="code docutils literal notranslate"><span class="pre">SHChannelsUp</span></code> from each backend. It aggregates these into <code class="code docutils literal notranslate"><span class="pre">LAChannelsInfo</span></code>.
It is potentially a very large message as it scales linearly with the number of nodes. It is beneficial
to compress this message before transmitting.</p>
</dd>
</dl>
<dl id="start-transport">
<dt>Start Transport Agent (A16-A18)</dt><dd><p>Local Services starts the Transport Agent as a child process. Over the command line, it passes the
node index of the node, a channel descriptor to receive messages from Local Services (TA ch),
logging channel descriptor. In the environment are environment variables containing channel
descriptors for gateway channels, to be used for sending and receiving messages off-node.</p>
<p>Over TA ch, <code class="code docutils literal notranslate"><span class="pre">LAChannelsInfo</span></code> is provided, so the transport agent can take IP and host ID info
to manage communication to other nodes on the backend.</p>
<p>The transport agent communicates a <code class="code docutils literal notranslate"><span class="pre">TAPingSH</span></code> to Local Services over the Local Services
channel provided for its node index in the <code class="code docutils literal notranslate"><span class="pre">LAChannelsInfo</span></code> message. This is sent upstream
as an <code class="code docutils literal notranslate"><span class="pre">TAUp</span></code> message. The frontend waits for such a message from every backend.</p>
</dd>
</dl>
<dl id="transport-cli">
<dt>CLI Inputs to Start Transport Agent (M17)</dt><dd><span class="target" id="module-dragon.transport"></span><dl class="py function">
<dt class="sig sig-object py" id="dragon.transport.start_transport_agent">
<span class="sig-name descname"><span class="pre">start_transport_agent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_ch_sdesc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../ref/core/Cython/utils.html#id10" title="dragon.utils.B64"><span class="pre">B64</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_ch_sdesc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../ref/core/Cython/utils.html#id10" title="dragon.utils.B64"><span class="pre">B64</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gateway_channels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../ref/core/Cython/channels.html#dragon.channels.Channel" title="dragon.channels.Channel"><span class="pre">Channel</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infrastructure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Popen</span></span></span><a class="headerlink" href="#dragon.transport.start_transport_agent" title="Permalink to this definition"></a></dt>
<dd><p>Start the backend transport agent</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_index</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>str</em><em>]</em>) – node index for this agent. should be in 0, N-1,
where N is number of backend compute nodes</p></li>
<li><p><strong>in_ch_sdesc</strong> (<a class="reference internal" href="../ref/core/Cython/utils.html#id10" title="dragon.utils.B64"><em>B64</em></a>) – Channel to be used for incoming infrastructure messages</p></li>
<li><p><strong>log_ch_sdesc</strong> (<a class="reference internal" href="../ref/core/Cython/utils.html#id10" title="dragon.utils.B64"><em>B64</em></a><em>, </em><em>optional</em>) – Channel to be used for logging to the Frontend, defaults to None</p></li>
<li><p><strong>args</strong> (<em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Command args for starting Transport Agents, defaults to None in which
case the TCP transport agent is initiated as default</p></li>
<li><p><strong>env</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Environment variables, defaults to None</p></li>
<li><p><strong>gateway_channels</strong> (<em>Iterable</em><em>[</em><a class="reference internal" href="../ref/core/Cython/channels.html#dragon.channels.Channel" title="dragon.channels.Channel"><em>Channel</em></a><em>]</em><em>, </em><em>optional</em>) – gateway channels to be set in transport agent’s environment.
If not set, it is assumed they are already set in the parent
environment or the one input, defaults to None</p></li>
<li><p><strong>infrastructure</strong> (<em>bool</em><em>, </em><em>optional</em>) – whether this agent will be used for infrastructure messaging, defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Transport agent child process</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>subprocess.Popen</p>
</dd>
</dl>
</dd></dl>

</dd>
</dl>
<dl id="start-global-services">
<dt>Start Global Services (A18-A22)</dt><dd><p>After sending <code class="code docutils literal notranslate"><span class="pre">TAUp</span></code>, Local Services on the primary node starts Global Services. Over <code class="code docutils literal notranslate"><span class="pre">stdin</span></code>
Local Services provides <code class="code docutils literal notranslate"><span class="pre">LAChannelsInfo</span></code>. With this information, Global Services is
immediately able to ping all Local Services’ instances on the backend via <code class="code docutils literal notranslate"><span class="pre">GSPingSH</span></code> (note:
the Transport Agent is necessary to route those correctly).</p>
<p>After receiving a response from every Local Services (<code class="code docutils literal notranslate"><span class="pre">SHPingGS</span></code>), it sends a <code class="code docutils literal notranslate"><span class="pre">GSIsUp</span></code>
that is ultimately routed to the Frontend. It is important to note the <code class="code docutils literal notranslate"><span class="pre">GSIsUp</span></code> message
is not guaranteed to arrive after all <code class="code docutils literal notranslate"><span class="pre">TAUp</span></code> messages, ie: <code class="code docutils literal notranslate"><span class="pre">GSIsUp</span></code> will necessarily
come after <code class="code docutils literal notranslate"><span class="pre">TAUp</span></code> on the primary node but may come before the <code class="code docutils literal notranslate"><span class="pre">TAUp</span></code> message from any
other backend node.</p>
<p>Once all <code class="code docutils literal notranslate"><span class="pre">TAup</span></code> and <code class="code docutils literal notranslate"><span class="pre">GSIsUp</span></code> messages are received, the Dragon runtime is fully up.</p>
</dd>
</dl>
<dl id="start-user-program">
<dt>Start User Program (A22-A25)</dt><dd><p>The Frontend starts the user program. This program was provided with the launcher’s invocation.
It is sent to the primary node via a <code class="code docutils literal notranslate"><span class="pre">GSProcessCreate</span></code> message. Upon receipt, Global Services sends
a <code class="code docutils literal notranslate"><span class="pre">GSProcessCreateResponse</span></code>.</p>
<p>After sending the response, it selects a Local Services to deploy the program to. After selection
it sends this request as a <code class="code docutils literal notranslate"><span class="pre">SHProcessCreate</span></code> to the selected Local Services. This Local Services
sends a <code class="code docutils literal notranslate"><span class="pre">SHProcessCreateResposne</span></code> as receipt.</p>
</dd>
</dl>
<dl class="simple" id="route-stdout">
<dt>Route User Program stdout (A25-A26)</dt><dd><p>Local Services ingests all the User Program <code class="code docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="code docutils literal notranslate"><span class="pre">stderr</span></code>. This is propogated to the
Frontend as a <code class="code docutils literal notranslate"><span class="pre">SHFwdOutput</span></code> message that contains information about what process the strings
originated from. With this information, the Frontend can provide the output via its <code class="code docutils literal notranslate"><span class="pre">stdout</span></code> so
the user can see it buffered cleanly and correctly with varying levels of verbosity.</p>
</dd>
</dl>
</section>
</section>
</section>
<section id="multi-node-teardown">
<span id="multinodeteardown"></span><h2>Multi Node Teardown<a class="headerlink" href="#multi-node-teardown" title="Permalink to this heading"></a></h2>
<p>In the multi-node case, there are a few more messages that are processed by
Local Services than in the single-node case. The <code class="code docutils literal notranslate"><span class="pre">GSHalted</span></code> message is forwarded
by Local Services to the launcher backend. The <code class="code docutils literal notranslate"><span class="pre">SHHaltTA</span></code> is sent to Local Services,
and it forwards the <code class="code docutils literal notranslate"><span class="pre">TAHalted</span></code> message to the backend when received.
Other than these three additional messages, the tear down is identical to the
single node version of tear down. One difference is that this tear down process
is repeated on every one of the compute nodes in the case of the multi-node
tear down.</p>
<p>In an abnormal situation, the <code class="code docutils literal notranslate"><span class="pre">AbnormalTermination</span></code> message may be received by
the Launcher from either Local Services or Global Services (via the Backend). In
that case, the launcher will initiate a teardown of the infrastructure starting
with sending of <code class="code docutils literal notranslate"><span class="pre">GSTeardown</span></code> (message 5 in diagram below).</p>
<section id="id3">
<h3>Sequence diagram<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" preserveAspectRatio="none" version="1.1" viewBox="0 0 1272 2089" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1986.7578" style="stroke:#000000;stroke-width:1.0;" width="10" x="112.5" y="87.1016"/><rect fill="#FFFFFF" height="1863.2266" style="stroke:#000000;stroke-width:1.0;" width="10" x="283.5" y="87.1016"/><rect fill="#FFFFFF" height="1708.4297" style="stroke:#000000;stroke-width:1.0;" width="10" x="450.5" y="87.1016"/><rect fill="#FFFFFF" height="1582.7656" style="stroke:#000000;stroke-width:1.0;" width="10" x="622.5" y="87.1016"/><rect fill="#FFFFFF" height="1379.7031" style="stroke:#000000;stroke-width:1.0;" width="10" x="770.5" y="87.1016"/><rect fill="#FFFFFF" height="862.7813" style="stroke:#000000;stroke-width:1.0;" width="10" x="912.5" y="87.1016"/><rect fill="#FFFFFF" height="497.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1045" y="87.1016"/><rect fill="#FFFFFF" height="54.2656" style="stroke:#000000;stroke-width:1.0;" width="10" x="1188" y="87.1016"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="117" x2="117" y1="36.2969" y2="46.2969"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="117" x2="117" y1="46.2969" y2="87.1016"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="117" x2="117" y1="87.1016" y2="2082.8594"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="288" x2="288" y1="36.2969" y2="46.2969"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="288" x2="288" y1="46.2969" y2="87.1016"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="288" x2="288" y1="87.1016" y2="2082.8594"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="455" x2="455" y1="36.2969" y2="46.2969"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="455" x2="455" y1="46.2969" y2="87.1016"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="455" x2="455" y1="87.1016" y2="2082.8594"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="627" x2="627" y1="36.2969" y2="46.2969"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="627" x2="627" y1="46.2969" y2="87.1016"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="627" x2="627" y1="87.1016" y2="2082.8594"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="775" x2="775" y1="36.2969" y2="46.2969"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="775" x2="775" y1="46.2969" y2="87.1016"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="775" x2="775" y1="87.1016" y2="2082.8594"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="917.5" x2="917.5" y1="36.2969" y2="46.2969"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="917.5" x2="917.5" y1="46.2969" y2="87.1016"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="917.5" x2="917.5" y1="87.1016" y2="2082.8594"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1049.5" x2="1049.5" y1="36.2969" y2="46.2969"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1049.5" x2="1049.5" y1="46.2969" y2="87.1016"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1049.5" x2="1049.5" y1="87.1016" y2="2082.8594"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1192.5" x2="1192.5" y1="36.2969" y2="46.2969"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1192.5" x2="1192.5" y1="46.2969" y2="87.1016"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1192.5" x2="1192.5" y1="87.1016" y2="2082.8594"/><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="149" x="43" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="50" y="24.9951">Launcher Front End</text><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="167" x="205" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="212" y="24.9951">TCP Overlay Front End</text><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="147" x="382" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="389" y="24.9951">Launcher Back End</text><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="165" x="545" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="552" y="24.9951">TCP Overlay Back End</text><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="111" x="720" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="727" y="24.9951">Local Services</text><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="126" x="854.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="861.5" y="24.9951">Transport Agent</text><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="119" x="990.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="997.5" y="24.9951">Global Services</text><rect fill="#F0E68C" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="147" x="1119.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="1126.5" y="24.9951">User Program Entry</text><rect fill="#FFFFFF" height="1986.7578" style="stroke:#000000;stroke-width:1.0;" width="10" x="112.5" y="87.1016"/><rect fill="#FFFFFF" height="1863.2266" style="stroke:#000000;stroke-width:1.0;" width="10" x="283.5" y="87.1016"/><rect fill="#FFFFFF" height="1708.4297" style="stroke:#000000;stroke-width:1.0;" width="10" x="450.5" y="87.1016"/><rect fill="#FFFFFF" height="1582.7656" style="stroke:#000000;stroke-width:1.0;" width="10" x="622.5" y="87.1016"/><rect fill="#FFFFFF" height="1379.7031" style="stroke:#000000;stroke-width:1.0;" width="10" x="770.5" y="87.1016"/><rect fill="#FFFFFF" height="862.7813" style="stroke:#000000;stroke-width:1.0;" width="10" x="912.5" y="87.1016"/><rect fill="#FFFFFF" height="497.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1045" y="87.1016"/><rect fill="#FFFFFF" height="54.2656" style="stroke:#000000;stroke-width:1.0;" width="10" x="1188" y="87.1016"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123" x="593.75" y="70.5073">Main Process running</text><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="134" x="1126" y="92.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1130" y="108.1685">[A1]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1165" y="108.1685"/><a href="#head-proc-exit" target="_top" title="#head-proc-exit" xlink:actuate="onRequest" xlink:href="#head-proc-exit" xlink:show="new" xlink:title="#head-proc-exit" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="91" x="1165" y="108.1685">head proc exit</text></a><polygon fill="#000000" points="791.5,137.3672,781.5,141.3672,791.5,145.3672" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="785.5" x2="1192" y1="141.3672" y2="141.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1048" y="136.3013">[M1]</text><a href="#death-watcher" target="_top" title="#death-watcher" xlink:actuate="onRequest" xlink:href="#death-watcher" xlink:show="new" xlink:title="#death-watcher" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="100" x="1086" y="136.3013">OS process exit</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="144" x="703" y="154.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="707" y="170.4341">[A2]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="742" y="170.4341">notify GS of exit</text><polygon fill="#000000" points="1033,214.7656,1043,218.7656,1033,222.7656" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="780.5" x2="1039" y1="218.7656" y2="218.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="787.5" y="206.1333">[M2]</text><a href="../infrastructure/messages_api.html#shprocessexit" target="_top" title="../infrastructure/messages_api.html#shprocessexit" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shprocessexit" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shprocessexit" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="38" x="825.5" y="198.5669">GS ch</text></a><a href="../infrastructure/messages_api.html#shprocessexit" target="_top" title="../infrastructure/messages_api.html#shprocessexit" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shprocessexit" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shprocessexit" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="92" x="825.5" y="213.6997">SHProcessExit</text></a><rect fill="#98FB98" height="38" style="stroke:#000000;stroke-width:1.0;" width="199" x="950" y="231.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="954" y="247.8325">[A3]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="989" y="247.8325">clean up existing globals</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="954" y="262.9653">[A4]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="989" y="262.9653">notify launcher of exit</text><polygon fill="#000000" points="471.5,307.2969,461.5,311.2969,471.5,315.2969" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="465.5" x2="1044" y1="311.2969" y2="311.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="924" y="298.6646">[M3]</text><a href="../infrastructure/messages_api.html#gsheadexit" target="_top" title="../infrastructure/messages_api.html#gsheadexit" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsheadexit" xlink:show="new" xlink:title="../infrastructure/messages_api.html#gsheadexit" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="962" y="291.0981">BE ch</text></a><a href="../infrastructure/messages_api.html#gsheadexit" target="_top" title="../infrastructure/messages_api.html#gsheadexit" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsheadexit" xlink:show="new" xlink:title="../infrastructure/messages_api.html#gsheadexit" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="76" x="962" y="306.231">GSHeadExit</text></a><polygon fill="#000000" points="133.5,351.5625,123.5,355.5625,133.5,359.5625" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="127.5" x2="449.5" y1="355.5625" y2="355.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="329.5" y="342.9302">[M4]</text><a href="../infrastructure/messages_api.html#gsheadexit" target="_top" title="this message comes only from primary node" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsheadexit" xlink:show="new" xlink:title="this message comes only from primary node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="76" x="367.5" y="335.3638">prime LA ch</text></a><a href="../infrastructure/messages_api.html#gsheadexit" target="_top" title="this message comes only from primary node" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsheadexit" xlink:show="new" xlink:title="this message comes only from primary node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="76" x="367.5" y="350.4966">GSHeadExit</text></a><rect fill="#98FB98" height="53" style="stroke:#000000;stroke-width:1.0;" width="180" x="27" y="368.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="31" y="384.6294">[A5]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="66" y="384.6294">new head process OR</text><a href="#start-teardown" target="_top" title="#start-teardown" xlink:actuate="onRequest" xlink:href="#start-teardown" xlink:show="new" xlink:title="#start-teardown" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="93" x="31" y="399.7622">start teardown</text></a><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="31" y="414.895">[A6]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="66" y="414.895">halt global services</text><polygon fill="#000000" points="438.5,459.2266,448.5,463.2266,438.5,467.2266" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="122.5" x2="444.5" y1="463.2266" y2="463.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="129.5" y="450.5942">[M5]</text><a href="../infrastructure/messages_api.html#gsteardown" target="_top" title="this is only sent to the primary node" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsteardown" xlink:show="new" xlink:title="this is only sent to the primary node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="77" x="167.5" y="443.0278">prime BE ch</text></a><a href="../infrastructure/messages_api.html#gsteardown" target="_top" title="this is only sent to the primary node" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gsteardown" xlink:show="new" xlink:title="this is only sent to the primary node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="80" x="167.5" y="458.1606">GSTeardown</text></a><polygon fill="#000000" points="1033,503.4922,1043,507.4922,1033,511.4922" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="460.5" x2="1039" y1="507.4922" y2="507.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="467.5" y="494.8599">[M6]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="505.5" y="487.2935">GS ch</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="505.5" y="502.4263">GSTeardown</text><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="182" x="959" y="520.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="963" y="536.5591">[A7]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="998" y="536.5591"/><a href="#halt-global-services" target="_top" title="#halt-global-services" xlink:actuate="onRequest" xlink:href="#halt-global-services" xlink:show="new" xlink:title="#halt-global-services" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="139" x="998" y="536.5591">detach from channels</text></a><polygon fill="#000000" points="791.5,580.8906,781.5,584.8906,791.5,588.8906" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="785.5" x2="1049" y1="584.8906" y2="584.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="944" y="572.2583">[M7]</text><a href="../infrastructure/messages_api.html#gshalted" target="_top" title="channels are detached. hence stdout" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gshalted" xlink:show="new" xlink:title="channels are detached. hence stdout" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="41" x="982" y="564.6919">stdout</text></a><a href="../infrastructure/messages_api.html#gshalted" target="_top" title="channels are detached. hence stdout" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gshalted" xlink:show="new" xlink:title="channels are detached. hence stdout" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="61" x="982" y="579.8247">GSHalted</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="89" x="1005" y="597.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1009" y="613.9575">[A8]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="1044" y="613.9575">GS exit</text><polygon fill="#000000" points="471.5,658.2891,461.5,662.2891,471.5,666.2891" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="465.5" x2="769.5" y1="662.2891" y2="662.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="664.5" y="649.6567">[M8]</text><a href="../infrastructure/messages_api.html#gshalted" target="_top" title="only occurs on primary node" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gshalted" xlink:show="new" xlink:title="only occurs on primary node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="702.5" y="642.0903">BE ch</text></a><a href="../infrastructure/messages_api.html#gshalted" target="_top" title="only occurs on primary node" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#gshalted" xlink:show="new" xlink:title="only occurs on primary node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="61" x="702.5" y="657.2231">GSHalted</text></a><polygon fill="#000000" points="133.5,702.5547,123.5,706.5547,133.5,710.5547" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="127.5" x2="449.5" y1="706.5547" y2="706.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="344.5" y="693.9224">[M9]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="408.5" y="686.356">LA ch</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="382.5" y="701.4888">GSHalted</text><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="87" x="74" y="719.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="78" y="735.6216">[A9]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="113" y="735.6216"/><a href="#halt-transport" target="_top" title="#halt-transport" xlink:actuate="onRequest" xlink:href="#halt-transport" xlink:show="new" xlink:title="#halt-transport" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="44" x="113" y="735.6216">halt TA</text></a><polygon fill="#000000" points="438.5,779.9531,448.5,783.9531,438.5,787.9531" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="122.5" x2="444.5" y1="783.9531" y2="783.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="129.5" y="771.3208">[M10]</text><a href="#one-to-many" target="_top" title="#one-to-many" xlink:actuate="onRequest" xlink:href="#one-to-many" xlink:show="new" xlink:title="#one-to-many" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="176.5" y="763.7544">BE ch</text></a><a href="#one-to-many" target="_top" title="#one-to-many" xlink:actuate="onRequest" xlink:href="#one-to-many" xlink:show="new" xlink:title="#one-to-many" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="86" x="176.5" y="778.8872">SHHaltTA #N</text></a><polygon fill="#000000" points="758.5,824.2188,768.5,828.2188,758.5,832.2188" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="460.5" x2="764.5" y1="828.2188" y2="828.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="467.5" y="815.5864">[M11]</text><a href="../infrastructure/messages_api.html#shhaltta" target="_top" title="../infrastructure/messages_api.html#shhaltta" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shhaltta" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shhaltta" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="514.5" y="808.02">LS ch</text></a><a href="../infrastructure/messages_api.html#shhaltta" target="_top" title="../infrastructure/messages_api.html#shhaltta" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shhaltta" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shhaltta" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="61" x="514.5" y="823.1528">SHHaltTA</text></a><polygon fill="#000000" points="900.5,868.4844,910.5,872.4844,900.5,876.4844" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="780.5" x2="906.5" y1="872.4844" y2="872.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="787.5" y="859.8521">[M12]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="834.5" y="852.2856">TA ch</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="834.5" y="867.4185">SHHaltTA</text><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="159" x="838" y="885.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="842" y="901.5513">[A10]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="886" y="901.5513">quiesce, timeout</text><polygon fill="#000000" points="791.5,945.8828,781.5,949.8828,791.5,953.8828" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="785.5" x2="916.5" y1="949.8828" y2="949.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="805.5" y="937.2505">[M13]</text><a href="#halt-transport" target="_top" title="This should be swapped with stdout" xlink:actuate="onRequest" xlink:href="#halt-transport" xlink:show="new" xlink:title="This should be swapped with stdout" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="852.5" y="929.6841">LS ch</text></a><a href="#halt-transport" target="_top" title="This should be swapped with stdout" xlink:actuate="onRequest" xlink:href="#halt-transport" xlink:show="new" xlink:title="This should be swapped with stdout" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="58" x="852.5" y="944.8169">TAHalted</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="95" x="870" y="962.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="874" y="978.9497">[A11]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="918" y="978.9497">TA exit</text><polygon fill="#000000" points="471.5,1023.2813,461.5,1027.2813,471.5,1031.2813" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="465.5" x2="769.5" y1="1027.2813" y2="1027.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="658.5" y="1014.6489">[M14]</text><a href="../infrastructure/messages_api.html#tahalted" target="_top" title="../infrastructure/messages_api.html#tahalted" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#tahalted" xlink:show="new" xlink:title="../infrastructure/messages_api.html#tahalted" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="705.5" y="1007.0825">BE ch</text></a><a href="../infrastructure/messages_api.html#tahalted" target="_top" title="../infrastructure/messages_api.html#tahalted" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#tahalted" xlink:show="new" xlink:title="../infrastructure/messages_api.html#tahalted" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="58" x="705.5" y="1022.2153">TAHalted</text></a><polygon fill="#000000" points="133.5,1067.5469,123.5,1071.5469,133.5,1075.5469" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="127.5" x2="449.5" y1="1071.5469" y2="1071.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="313.5" y="1058.9146">[M15]</text><a href="#many-to-one" target="_top" title="#many-to-one" xlink:actuate="onRequest" xlink:href="#many-to-one" xlink:show="new" xlink:title="#many-to-one" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="360.5" y="1051.3481">LA ch</text></a><a href="#many-to-one" target="_top" title="#many-to-one" xlink:actuate="onRequest" xlink:href="#many-to-one" xlink:show="new" xlink:title="#many-to-one" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="83" x="360.5" y="1066.481">TAHalted #N</text></a><rect fill="#98FB98" height="38" style="stroke:#000000;stroke-width:1.0;" width="156" x="39" y="1084.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="43" y="1100.6138">[A12]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="87" y="1100.6138">gather TAHalted</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="43" y="1115.7466">[A13]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="87" y="1115.7466"/><a href="#issue-shteardown" target="_top" title="this is where things can get messy" xlink:actuate="onRequest" xlink:href="#issue-shteardown" xlink:show="new" xlink:title="this is where things can get messy" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="93" x="87" y="1115.7466">halt LS and BE</text></a><polygon fill="#000000" points="438.5,1160.0781,448.5,1164.0781,438.5,1168.0781" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="122.5" x2="444.5" y1="1164.0781" y2="1164.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="129.5" y="1151.4458">[M16]</text><a href="#one-to-many" target="_top" title="#one-to-many" xlink:actuate="onRequest" xlink:href="#one-to-many" xlink:show="new" xlink:title="#one-to-many" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="176.5" y="1143.8794">BE ch</text></a><a href="#one-to-many" target="_top" title="#one-to-many" xlink:actuate="onRequest" xlink:href="#one-to-many" xlink:show="new" xlink:title="#one-to-many" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="105" x="176.5" y="1159.0122">SHTeardown #N</text></a><polygon fill="#000000" points="758.5,1204.3438,768.5,1208.3438,758.5,1212.3438" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="460.5" x2="764.5" y1="1208.3438" y2="1208.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="467.5" y="1195.7114">[M17]</text><a href="../infrastructure/messages_api.html#shteardown" target="_top" title="../infrastructure/messages_api.html#shteardown" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shteardown" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shteardown" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="514.5" y="1188.145">LS ch</text></a><a href="../infrastructure/messages_api.html#shteardown" target="_top" title="../infrastructure/messages_api.html#shteardown" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shteardown" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shteardown" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="80" x="514.5" y="1203.2778">SHTeardown</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="283" x="634" y="1221.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="638" y="1237.4106">[A14]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="682" y="1237.4106">detach from dragon logging channel</text><polygon fill="#000000" points="471.5,1281.7422,461.5,1285.7422,471.5,1289.7422" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="465.5" x2="769.5" y1="1285.7422" y2="1285.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="654.5" y="1273.1099">[M18]</text><a href="../infrastructure/messages_api.html#shhaltbe" target="_top" title="../infrastructure/messages_api.html#shhaltbe" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shhaltbe" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shhaltbe" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="701.5" y="1265.5435">BE ch</text></a><a href="../infrastructure/messages_api.html#shhaltbe" target="_top" title="../infrastructure/messages_api.html#shhaltbe" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#shhaltbe" xlink:show="new" xlink:title="../infrastructure/messages_api.html#shhaltbe" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="62" x="701.5" y="1280.6763">SHHaltBE</text></a><polygon fill="#000000" points="133.5,1326.0078,123.5,1330.0078,133.5,1334.0078" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="127.5" x2="449.5" y1="1330.0078" y2="1330.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="309.5" y="1317.3755">[M19]</text><a href="#many-to-one" target="_top" title="#many-to-one" xlink:actuate="onRequest" xlink:href="#many-to-one" xlink:show="new" xlink:title="#many-to-one" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="356.5" y="1309.8091">LA ch</text></a><a href="#many-to-one" target="_top" title="#many-to-one" xlink:actuate="onRequest" xlink:href="#many-to-one" xlink:show="new" xlink:title="#many-to-one" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="87" x="356.5" y="1324.9419">SHHaltBE #N</text></a><rect fill="#98FB98" height="38" style="stroke:#000000;stroke-width:1.0;" width="225" x="5" y="1343.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="9" y="1359.0747">[A15]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="53" y="1359.0747">wait on N SHHaltBE</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="9" y="1374.2075">[A16]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="53" y="1374.2075"/><a href="#issue-behalted" target="_top" title="#issue-behalted" xlink:actuate="onRequest" xlink:href="#issue-behalted" xlink:show="new" xlink:title="#issue-behalted" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="173" x="53" y="1374.2075">Continue BE and LS halting</text></a><polygon fill="#000000" points="438.5,1418.5391,448.5,1422.5391,438.5,1426.5391" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="122.5" x2="444.5" y1="1422.5391" y2="1422.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="129.5" y="1409.9067">[M20]</text><a href="../infrastructure/messages_api.html#behalted" target="_top" title="../infrastructure/messages_api.html#behalted" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#behalted" xlink:show="new" xlink:title="../infrastructure/messages_api.html#behalted" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="176.5" y="1402.3403">BE ch</text></a><a href="../infrastructure/messages_api.html#behalted" target="_top" title="../infrastructure/messages_api.html#behalted" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#behalted" xlink:show="new" xlink:title="../infrastructure/messages_api.html#behalted" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="59" x="176.5" y="1417.4731">BEHalted</text></a><polygon fill="#000000" points="763.5,1462.8047,773.5,1466.8047,763.5,1470.8047" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="460.5" x2="769.5" y1="1466.8047" y2="1466.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="467.5" y="1454.1724">[M21]</text><a href="../infrastructure/messages_api.html#behalted" target="_top" title="done over stdout to limit memory errors" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#behalted" xlink:show="new" xlink:title="done over stdout to limit memory errors" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="41" x="514.5" y="1446.606">stdout</text></a><a href="../infrastructure/messages_api.html#behalted" target="_top" title="done over stdout to limit memory errors" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#behalted" xlink:show="new" xlink:title="done over stdout to limit memory errors" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="59" x="514.5" y="1461.7388">BEHalted</text></a><rect fill="#98FB98" height="38" style="stroke:#000000;stroke-width:1.0;" width="204" x="673" y="1479.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="677" y="1495.8716">[A17]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="721" y="1495.8716">deallocate shared mem</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="677" y="1511.0044">[A18]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="721" y="1511.0044">exit</text><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="163" x="374" y="1528.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="378" y="1544.1372">[A19]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="422" y="1544.1372">shutdown overlay</text><polygon fill="#000000" points="610.5,1588.4688,620.5,1592.4688,610.5,1596.4688" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="460.5" x2="616.5" y1="1592.4688" y2="1592.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="467.5" y="1579.8364">[M22]</text><a href="../infrastructure/messages_api.html#behaltoverlay" target="_top" title="../infrastructure/messages_api.html#behaltoverlay" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#behaltoverlay" xlink:show="new" xlink:title="../infrastructure/messages_api.html#behaltoverlay" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="50" x="514.5" y="1572.27">CTRL ch</text></a><a href="../infrastructure/messages_api.html#behaltoverlay" target="_top" title="../infrastructure/messages_api.html#behaltoverlay" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#behaltoverlay" xlink:show="new" xlink:title="../infrastructure/messages_api.html#behaltoverlay" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="91" x="514.5" y="1587.4028">BEHaltOverlay</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="159" x="548" y="1605.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="552" y="1621.5356">[A20]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="596" y="1621.5356">quiesce, timeout</text><polygon fill="#000000" points="471.5,1665.8672,461.5,1669.8672,471.5,1673.8672" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="465.5" x2="626.5" y1="1669.8672" y2="1669.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="483.5" y="1657.2349">[M23]</text><a href="../infrastructure/messages_api.html#overlayhalted" target="_top" title="../infrastructure/messages_api.html#overlayhalted" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#overlayhalted" xlink:show="new" xlink:title="../infrastructure/messages_api.html#overlayhalted" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="50" x="530.5" y="1649.6685">CTRL ch</text></a><a href="../infrastructure/messages_api.html#overlayhalted" target="_top" title="../infrastructure/messages_api.html#overlayhalted" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#overlayhalted" xlink:show="new" xlink:title="../infrastructure/messages_api.html#overlayhalted" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="90" x="530.5" y="1664.8013">OverlayHalted</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="75" x="590" y="1682.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="594" y="1698.9341">[A21]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="638" y="1698.9341">exit</text><rect fill="#98FB98" height="53" style="stroke:#000000;stroke-width:1.0;" width="224" x="343" y="1716"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="347" y="1732.0669">[A22]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="391" y="1732.0669">wait on LS and Overlay exit</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="347" y="1747.1997">[A23]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="391" y="1747.1997">destroy memory</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="347" y="1762.3325">[A24]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="391" y="1762.3325">exit</text><polygon fill="#000000" points="133.5,1791.5313,123.5,1795.5313,133.5,1799.5313" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="127.5" x2="454.5" y1="1795.5313" y2="1795.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="310.5" y="1790.4653">[M24]</text><a href="#wlm-launch" target="_top" title="#wlm-launch" xlink:actuate="onRequest" xlink:href="#wlm-launch" xlink:show="new" xlink:title="#wlm-launch" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="91" x="357.5" y="1790.4653">WLM exit code</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="190" x="22" y="1808.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="26" y="1824.5981">[A25]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="70" y="1824.5981"/><a href="#wlm-launch" target="_top" title="#wlm-launch" xlink:actuate="onRequest" xlink:href="#wlm-launch" xlink:show="new" xlink:title="#wlm-launch" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="138" x="70" y="1824.5981">wait on WLM to return</text></a><polygon fill="#000000" points="271.5,1868.9297,281.5,1872.9297,271.5,1876.9297" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="122.5" x2="277.5" y1="1872.9297" y2="1872.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="129.5" y="1860.2974">[M25]</text><a href="../infrastructure/messages_api.html#lahaltoverlay" target="_top" title="../infrastructure/messages_api.html#lahaltoverlay" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#lahaltoverlay" xlink:show="new" xlink:title="../infrastructure/messages_api.html#lahaltoverlay" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="50" x="176.5" y="1852.731">CTRL ch</text></a><a href="../infrastructure/messages_api.html#lahaltoverlay" target="_top" title="../infrastructure/messages_api.html#lahaltoverlay" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#lahaltoverlay" xlink:show="new" xlink:title="../infrastructure/messages_api.html#lahaltoverlay" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="90" x="176.5" y="1867.8638">LAHaltOverlay</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="159" x="209" y="1885.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="213" y="1901.9966">[A26]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="257" y="1901.9966">quiesce, timeout</text><polygon fill="#000000" points="133.5,1946.3281,123.5,1950.3281,133.5,1954.3281" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="127.5" x2="287.5" y1="1950.3281" y2="1950.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="144.5" y="1937.6958">[M26]</text><a href="../infrastructure/messages_api.html#overlayhalted" target="_top" title="../infrastructure/messages_api.html#overlayhalted" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#overlayhalted" xlink:show="new" xlink:title="../infrastructure/messages_api.html#overlayhalted" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="50" x="191.5" y="1930.1294">CTRL ch</text></a><a href="../infrastructure/messages_api.html#overlayhalted" target="_top" title="../infrastructure/messages_api.html#overlayhalted" xlink:actuate="onRequest" xlink:href="../infrastructure/messages_api.html#overlayhalted" xlink:show="new" xlink:title="../infrastructure/messages_api.html#overlayhalted" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="90" x="191.5" y="1945.2622">OverlayHalted</text></a><rect fill="#98FB98" height="23" style="stroke:#000000;stroke-width:1.0;" width="75" x="251" y="1963.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="255" y="1979.395">[A27]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="299" y="1979.395">exit</text><rect fill="#98FB98" height="38" style="stroke:#000000;stroke-width:1.0;" width="204" x="15" y="1996.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="19" y="2012.5278">[A28]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="63" y="2012.5278">deallocate shared mem</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="19" y="2027.6606">[A29]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="63" y="2027.6606">exit</text><polygon fill="#EE82EE" points="56,2044.7266,1254,2044.7266,1264,2055.7266,1254,2067.7266,56,2067.7266,46,2055.7266,56,2044.7266" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="579.25" y="2060.7935">Dragon runtime is down</text><!--MD5=[5f599c95f4d062312c1c456b2d580f64]
@startuml
skinparam style strictuml

' Make sure the SVG scales in the rst correctly
skinparam svgDimensionStyle false

' Style crap
skinparam sequenceMessageAlign direction
skinparam LifelineStrategy nosolid
skinparam ParticipantBackgroundColor Khaki
skinparam NoteBackgroundColor PaleGreen
skinparam ParticipantBorderColor Black
skinparam NoteBorderColor Black
skinparam ArrowColor Black
skinparam SequenceLifeLineBorderColor Black

participant "Launcher Front End" as LA
participant "TCP Overlay Front End" as OF
participant "Launcher Back End" as BE
participant "TCP Overlay Back End" as OB
participant "Local Services" as LS
participant "Transport Agent" as TA
participant "Global Services" as GS
participant "User Program Entry" as UP

autonumber "<b>[M0]"

' function to keep track of action numbering
!global $action_count = 0
!function $action()
!global $action_count = $action_count + 1
!return "<b>[A" + $action_count + "]</b>"
!endfunction

' activate everything since everything is up
activate LA
activate OF
activate BE
activate OB
activate LS
activate TA
activate GS
activate UP

... Main Process running ...

' Handle head proc exiting
rnote over UP: $action() [[#head-proc-exit head proc exit]]
LS<-UP: [[#death-watcher OS process exit]]
deactivate UP
rnote over LS: $action() notify GS of exit
LS->GS: [[../infrastructure/messages_api.html#shprocessexit GS ch\nSHProcessExit]]
rnote over GS: $action() clean up existing globals\n$action() notify launcher of exit
BE<-GS: [[../infrastructure/messages_api.html#gsheadexit BE ch\nGSHeadExit]]
LA<-BE: [[../infrastructure/messages_api.html#gsheadexit {this message comes only from primary node} prime LA ch\nGSHeadExit]]
rnote over LA: $action() new head process OR\n[[#start-teardown start teardown]]\n$action() halt global services

' Proceed with teardown starting with global services
LA->BE: [[../infrastructure/messages_api.html#gsteardown {this is only sent to the primary node} prime BE ch\nGSTeardown]]
BE->GS: GS ch\nGSTeardown
rnote over GS: $action() [[#halt-global-services detach from channels]]
LS<-GS: [[../infrastructure/messages_api.html#gshalted {channels are detached. hence stdout} stdout\nGSHalted]]
rnote over GS: $action() GS exit
deactivate GS
BE<-LS: [[../infrastructure/messages_api.html#gshalted {only occurs on primary node} BE ch\nGSHalted]]
LA<-BE: LA ch\nGSHalted

' Halt transport agent
rnote over LA: $action() [[#halt-transport halt TA]]
LA->BE: [[#one-to-many BE ch\nSHHaltTA #N]]
BE->LS: [[../infrastructure/messages_api.html#shhaltta LS ch\nSHHaltTA]]
LS->TA: TA ch\nSHHaltTA
rnote over TA: $action() quiesce, timeout
LS<-TA: [[#halt-transport {This should be swapped with stdout} LS ch\nTAHalted]]
rnote over TA: $action() TA exit
deactivate TA
BE<-LS: [[../infrastructure/messages_api.html#tahalted BE ch\nTAHalted]]
LA<-BE: [[#many-to-one LA ch\nTAHalted #N]]
rnote over LA: $action() gather TAHalted\n$action() [[#issue-shteardown {this is where things can get messy} halt LS and BE]]

' Handle local services and backend in one swoop
LA->BE: [[#one-to-many BE ch\nSHTeardown #N]]
BE->LS: [[../infrastructure/messages_api.html#shteardown LS ch\nSHTeardown]]
rnote over LS: $action() detach from dragon logging channel
BE<-LS: [[../infrastructure/messages_api.html#shhaltbe BE ch\nSHHaltBE]]
LA<-BE: [[#many-to-one LA ch\nSHHaltBE #N]]
rnote over LA: $action() wait on N SHHaltBE\n$action() [[#issue-behalted Continue BE and LS halting]]
LA->BE: [[../infrastructure/messages_api.html#behalted BE ch\nBEHalted]]
BE->LS: [[../infrastructure/messages_api.html#behalted {done over stdout to limit memory errors} stdout\nBEHalted]]
rnote over LS: $action() deallocate shared mem\n$action() exit
deactivate LS

' Shutdown backend overlay
rnote over BE: $action() shutdown overlay
BE->OB: [[../infrastructure/messages_api.html#behaltoverlay CTRL ch\nBEHaltOverlay]]
rnote over OB: $action() quiesce, timeout
BE<-OB: [[../infrastructure/messages_api.html#overlayhalted CTRL ch\nOverlayHalted]]
rnote over OB: $action() exit
deactivate OB
rnote over BE: $action() wait on LS and Overlay exit\n$action() destroy memory\n$action() exit
LA<-BE: [[#wlm-launch WLM exit code]]
deactivate BE

' Shutdown frontend overlay and exit frontend
rnote over LA: $action() [[#wlm-launch wait on WLM to return]]
LA->OF: [[../infrastructure/messages_api.html#lahaltoverlay CTRL ch\nLAHaltOverlay]]
rnote over OF: $action() quiesce, timeout
LA<-OF: [[../infrastructure/messages_api.html#overlayhalted CTRL ch\nOverlayHalted]]
rnote over OF: $action() exit
deactivate OF
rnote over LA: $action() deallocate shared mem\n$action() exit
hnote across #violet: Dragon runtime is down

@enduml

@startuml
skinparam style strictuml

skinparam svgDimensionStyle false

skinparam sequenceMessageAlign direction
skinparam LifelineStrategy nosolid
skinparam ParticipantBackgroundColor Khaki
skinparam NoteBackgroundColor PaleGreen
skinparam ParticipantBorderColor Black
skinparam NoteBorderColor Black
skinparam ArrowColor Black
skinparam SequenceLifeLineBorderColor Black

participant "Launcher Front End" as LA
participant "TCP Overlay Front End" as OF
participant "Launcher Back End" as BE
participant "TCP Overlay Back End" as OB
participant "Local Services" as LS
participant "Transport Agent" as TA
participant "Global Services" as GS
participant "User Program Entry" as UP

autonumber "<b>[M0]"


activate LA
activate OF
activate BE
activate OB
activate LS
activate TA
activate GS
activate UP

... Main Process running ...

rnote over UP: <b>[A1]</b> [[#head-proc-exit head proc exit]]
LS<-UP: [[#death-watcher OS process exit]]
deactivate UP
rnote over LS: <b>[A2]</b> notify GS of exit
LS->GS: [[../infrastructure/messages_api.html#shprocessexit GS ch\nSHProcessExit]]
rnote over GS: <b>[A3]</b> clean up existing globals\n<b>[A4]</b> notify launcher of exit
BE<-GS: [[../infrastructure/messages_api.html#gsheadexit BE ch\nGSHeadExit]]
LA<-BE: [[../infrastructure/messages_api.html#gsheadexit {this message comes only from primary node} prime LA ch\nGSHeadExit]]
rnote over LA: <b>[A5]</b> new head process OR\n[[#start-teardown start teardown]]\n<b>[A6]</b> halt global services

LA->BE: [[../infrastructure/messages_api.html#gsteardown {this is only sent to the primary node} prime BE ch\nGSTeardown]]
BE->GS: GS ch\nGSTeardown
rnote over GS: <b>[A7]</b> [[#halt-global-services detach from channels]]
LS<-GS: [[../infrastructure/messages_api.html#gshalted {channels are detached. hence stdout} stdout\nGSHalted]]
rnote over GS: <b>[A8]</b> GS exit
deactivate GS
BE<-LS: [[../infrastructure/messages_api.html#gshalted {only occurs on primary node} BE ch\nGSHalted]]
LA<-BE: LA ch\nGSHalted

rnote over LA: <b>[A9]</b> [[#halt-transport halt TA]]
LA->BE: [[#one-to-many BE ch\nSHHaltTA #N]]
BE->LS: [[../infrastructure/messages_api.html#shhaltta LS ch\nSHHaltTA]]
LS->TA: TA ch\nSHHaltTA
rnote over TA: <b>[A10]</b> quiesce, timeout
LS<-TA: [[#halt-transport {This should be swapped with stdout} LS ch\nTAHalted]]
rnote over TA: <b>[A11]</b> TA exit
deactivate TA
BE<-LS: [[../infrastructure/messages_api.html#tahalted BE ch\nTAHalted]]
LA<-BE: [[#many-to-one LA ch\nTAHalted #N]]
rnote over LA: <b>[A12]</b> gather TAHalted\n<b>[A13]</b> [[#issue-shteardown {this is where things can get messy} halt LS and BE]]

LA->BE: [[#one-to-many BE ch\nSHTeardown #N]]
BE->LS: [[../infrastructure/messages_api.html#shteardown LS ch\nSHTeardown]]
rnote over LS: <b>[A14]</b> detach from dragon logging channel
BE<-LS: [[../infrastructure/messages_api.html#shhaltbe BE ch\nSHHaltBE]]
LA<-BE: [[#many-to-one LA ch\nSHHaltBE #N]]
rnote over LA: <b>[A15]</b> wait on N SHHaltBE\n<b>[A16]</b> [[#issue-behalted Continue BE and LS halting]]
LA->BE: [[../infrastructure/messages_api.html#behalted BE ch\nBEHalted]]
BE->LS: [[../infrastructure/messages_api.html#behalted {done over stdout to limit memory errors} stdout\nBEHalted]]
rnote over LS: <b>[A17]</b> deallocate shared mem\n<b>[A18]</b> exit
deactivate LS

rnote over BE: <b>[A19]</b> shutdown overlay
BE->OB: [[../infrastructure/messages_api.html#behaltoverlay CTRL ch\nBEHaltOverlay]]
rnote over OB: <b>[A20]</b> quiesce, timeout
BE<-OB: [[../infrastructure/messages_api.html#overlayhalted CTRL ch\nOverlayHalted]]
rnote over OB: <b>[A21]</b> exit
deactivate OB
rnote over BE: <b>[A22]</b> wait on LS and Overlay exit\n<b>[A23]</b> destroy memory\n<b>[A24]</b> exit
LA<-BE: [[#wlm-launch WLM exit code]]
deactivate BE

rnote over LA: <b>[A25]</b> [[#wlm-launch wait on WLM to return]]
LA->OF: [[../infrastructure/messages_api.html#lahaltoverlay CTRL ch\nLAHaltOverlay]]
rnote over OF: <b>[A26]</b> quiesce, timeout
LA<-OF: [[../infrastructure/messages_api.html#overlayhalted CTRL ch\nOverlayHalted]]
rnote over OF: <b>[A27]</b> exit
deactivate OF
rnote over LA: <b>[A28]</b> deallocate shared mem\n<b>[A29]</b> exit
hnote across #violet: Dragon runtime is down

@enduml

PlantUML version 1.2022.1(Tue Feb 01 18:19:58 GMT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg><p><strong>Figure 7: Multi-Node Teardown Sequence</strong></p>
<section id="notes-on-teardown-sequence">
<h4>Notes on Teardown Sequence<a class="headerlink" href="#notes-on-teardown-sequence" title="Permalink to this heading"></a></h4>
<dl id="head-proc-exit">
<dt>Head Proc Exit (A1-A4)</dt><dd><p>Local Services monitors its managed processes via <code class="code docutils literal notranslate"><span class="pre">waitpid</span></code>. Once it registers
an exit, it matches its pid to the internally tracked and globally unique puid.
This puid is transmitted via <code class="code docutils literal notranslate"><span class="pre">SHProcessExit</span></code> to Global Services.</p>
<p>Global Services cleans up any resources tied to tracking that specific head process.
Once that is complete, it alerts the Frontend via a <code class="code docutils literal notranslate"><span class="pre">GSHeadExit</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="death-watcher">
<dt>Local Services Death Watcher (M1):</dt><dd><p>Local Services’ main thread has a thread repeatedly calling <code class="code docutils literal notranslate"><span class="pre">waitpid</span></code>. This thread
will receive the exit code from the head process.</p>
</dd>
</dl>
<dl id="start-teardown">
<dt>Begin Teardown (A5-A7)</dt><dd><p>With exit of the head process, as of this writing (03/24/2023), the Launcher will begin
teardown.</p>
<p>Teardown is initiated via the <code class="code docutils literal notranslate"><span class="pre">GSTeardown</span></code> message to Global Services. Once this message is
sent, every thing is ignored from user input. Teardown is what is being done. <code class="code docutils literal notranslate"><span class="pre">GSTeardown</span></code>
is also the message sent via a SIGINT signal from the user (assuming the full runtime is up).</p>
<p>Consequently with a full runtime, <code class="code docutils literal notranslate"><span class="pre">GSTeardown</span></code> is always the first point of entry for exiting
the Dragon runtime no matter the state of various individual runtime services.</p>
</dd>
</dl>
<dl id="halt-global-services">
<dt>Halt Global Services (A7-A9)</dt><dd><p>Once Global Services receives the <code class="code docutils literal notranslate"><span class="pre">GSTeardown</span></code>, it detaches from any channels. It does not
destroy any (aside from any it may have directly created) because Local Services has created the
channels used for infrastructure and manages the memory created for them.</p>
<p>Once it has shutdown its resources, it transmits <code class="code docutils literal notranslate"><span class="pre">GSHalted</span></code> to Local Services over <code class="code docutils literal notranslate"><span class="pre">stdout</span></code>
and exits. This is forwarded all the way to the Frontend.</p>
</dd>
</dl>
<dl id="halt-transport">
<dt>Halt Transport Agent (A9-A12)</dt><dd><p>After the Frontend receives <code class="code docutils literal notranslate"><span class="pre">GSHalted</span></code>, it initiates teardown of all Backend
Transport Agents via <code class="code docutils literal notranslate"><span class="pre">SHHaltTA</span></code> which is eventually routed to the transport
agent from Local Services.</p>
<p>Upon receipt, it cancels any outstanding work it has, sends <code class="code docutils literal notranslate"><span class="pre">TAHalted</span></code> over its
channel to Local Services (<strong>NOTE: This should be over stdout</strong>) and exits.</p>
<p>Local Services forwards the exit to the Frontend via routing of a <code class="code docutils literal notranslate"><span class="pre">TAHalted</span></code> messages.
The Frontend waits for receipt of N messages before continuing (<strong>NOTE: This can easily
result in hung processes and should be addressed</strong>).</p>
</dd>
</dl>
<dl id="issue-shteardown">
<dt>Issue SHTeardown (A13-A16)</dt><dd><p>This is the first step in the more carefully orchestrated destruction of the Backend.
Once Local Services receives <code class="code docutils literal notranslate"><span class="pre">SHTeardown</span></code>, it detaches from its logging channel and
tranmits a <code class="code docutils literal notranslate"><span class="pre">SHHaltBE</span></code> to the Backend.</p>
<p>After destroying its logging infrastructure, the Backend forwards the <code class="code docutils literal notranslate"><span class="pre">SHHaltBE</span></code> to the Frontend.
The Frontend waits till it receives N <code class="code docutils literal notranslate"><span class="pre">SHHaltBE</span></code> messages before exiting. (<strong>NOTE: Another
potential mess</strong>).</p>
</dd>
</dl>
<dl id="issue-behalted">
<dt>Issue BEHalted (A17-A19)</dt><dd><p>Frontend sends <code class="code docutils literal notranslate"><span class="pre">BEHalted</span></code> to all Backends. Once sent, there is no more direct communication
between Backend and Frontend. The Frontend will simply confirm completion via exit codes from
the workload manager.</p>
<p>Once Local Services receives its <code class="code docutils literal notranslate"><span class="pre">BEHalted</span></code>, it deallocates all its allocated memory and exits.</p>
</dd>
</dl>
<dl id="shutdown-be-overlay">
<dt>Shutdown Backend and its overlay (A20-A25)</dt><dd><p>After transmitting <code class="code docutils literal notranslate"><span class="pre">BEHalted</span></code> to Local Services, the Backend issues <code class="code docutils literal notranslate"><span class="pre">SHHaltTA</span></code> to its
overlay transport agent. This triggers teardown identical to the transport referenced in
<a class="reference internal" href="#halt-transport"><span class="std std-ref">Halt Transport Agent (A9-A12)</span></a>.</p>
<p>Once the overlay is down and Local Services is down as measured by a simple <code class="code docutils literal notranslate"><span class="pre">wait</span></code> on
child process exits, the Backend deallocated its managed memory, including logging
infrastructure and exits.</p>
</dd>
</dl>
<dl id="shutdown-fe-overlay">
<dt>Shutdown Frontend (A26-A30)</dt><dd><p>After the workload manager returns exit code for the Backend exit, the Frontend shuts down
its overlay similar to the Backend in <a class="reference internal" href="#shutdown-be-overlay"><span class="std std-ref">Shutdown Backend and its overlay (A20-A25)</span></a>. After waiting on the successful
overlay exit, it similarly deallocates managed memory and exits.</p>
<p>After the Frontend exits, the Dragon runtime is down.</p>
</dd>
</dl>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="single_node_deployment.html" class="btn btn-neutral float-left" title="Single Node Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="bootstrapping.html" class="btn btn-neutral float-right" title="Infrastructure Bootstrapping" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>